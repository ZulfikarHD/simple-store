import{u as X,y as J,r as z,z as Y,d as Z,a as g,b as i,f as s,h as tt,w as a,e as t,j as p,q as _,t as x,i as L,o as l,l as A,g as k,F as O,k as H,A as st,n as K}from"./app-DFCAcBxY.js";import{c as T,u as et,M as u,s as c,a as b,S as q}from"./shopping-bag-B6VKI7sq.js";import{B as R,F as it,_ as at}from"./AppLayout.vue_vue_type_script_setup_true_lang-DkLqUITi.js";import{_ as ot,P as I}from"./package-C_ORoyoZ.js";import{_ as nt}from"./index-DLvYs-W1.js";import"./ProductController-0M3t1kra.js";import"./CartController-1jpe7Y2F.js";/* empty css                                                                       */import{_ as U}from"./OrderStatusBadge.vue_vue_type_script_setup_true_lang-t5Lu6K09.js";import{_ as V}from"./PriceDisplay.vue_vue_type_script_setup_true_lang-Crvh3PKL.js";import{_ as lt}from"./PullToRefresh.vue_vue_type_script_setup_true_lang-CO4V6-sd.js";import{d as rt,b as Q,i as dt,c as W,e as ut}from"./index-7PYCkdjy.js";import{W as ct}from"./wallet-F4ApNlpL.js";import{C as E}from"./clock-C9eE2lX2.js";import{C as G}from"./chevron-right-CZEmCPtx.js";import{C as mt}from"./calendar-GJQ9jsDR.js";import"./Input.vue_vue_type_script_setup_true_lang-DVqLXCRn.js";import"./VisuallyHidden-Ch7EV57W.js";import"./useForwardExpose-D6SWLn_1.js";import"./RovingFocusGroup-CDcxHENA.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-Dp0PW41R.js";import"./settings-YLotSQbe.js";import"./log-out-fgXzZBJN.js";import"./x-Bsz6avL0.js";import"./Label.vue_vue_type_script_setup_true_lang-BSMPTL2J.js";import"./lock-COBZXJbX.js";import"./loader-circle-6h6_FZdM.js";import"./phone-B9XiDBOn.js";import"./check-Cjcw6ys6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ft=T("ArrowUpRightIcon",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);const pt=T("BellOffIcon",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);const xt=T("SparklesIcon",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const gt=T("TrendingUpIcon",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),w=z("default"),M=z(!1);function yt(){const r=X();function y(){return M.value="Notification"in window,M.value}async function N(){if(!y())return!1;try{const f=await Notification.requestPermission();return w.value=f,f==="granted"}catch{return!1}}function m(f){if(!M.value||w.value!=="granted")return;const n=new Notification("Pesanan Baru!",{body:`Ada ${f} pesanan baru yang perlu diproses.`,icon:"/favicon.ico",tag:"new-order",requireInteraction:!0});n.onclick=()=>{window.focus(),n.close()},setTimeout(()=>{n.close()},1e4)}function B(){Y(()=>r.props.pending_orders_count,(f,n)=>{if(f!==void 0&&n!==void 0&&f>n&&w.value==="granted"){const j=f-n;m(j)}})}return J(()=>{y(),M.value&&(w.value=Notification.permission)}),{isSupported:M,notificationPermission:w,requestPermission:N,showNewOrderNotification:m,watchPendingOrders:B}}const vt={class:"admin-page flex flex-col gap-6 p-4 md:p-6"},ht={class:"flex items-center gap-3"},_t={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},kt={class:"relative flex items-start justify-between"},bt={class:"flex flex-col gap-3"},wt={class:"flex items-center gap-2"},Mt={class:"stats-icon--gold"},Pt={class:"flex items-start justify-between"},Ct={class:"flex flex-col gap-2"},$t={class:"text-3xl font-bold"},At={class:"stats-icon"},Tt={class:"flex items-start justify-between"},Nt={class:"flex flex-col gap-2"},Bt={class:"flex items-center gap-2"},jt={key:0,class:"flex h-2 w-2"},St={class:"text-3xl font-bold"},Ot={class:"stats-icon--gold"},qt={class:"grid gap-4 md:grid-cols-3"},It={class:"flex items-center gap-4"},zt={class:"stats-icon--success"},Dt={class:"flex flex-col"},Ft={class:"text-2xl font-bold"},Lt={class:"stats-card p-4"},Ht={class:"flex items-center gap-4"},Kt={class:"flex flex-col"},Rt={class:"stats-card p-4"},Ut={class:"flex flex-wrap gap-2"},Vt={class:"quick-action-pill"},Qt={class:"quick-action-pill"},Wt={class:"grid gap-6 lg:grid-cols-5"},Et={class:"admin-form-section"},Gt={class:"admin-form-section-header"},Jt={class:"flex items-center justify-between"},Xt={class:"admin-form-section-content p-0"},Yt={key:0,class:"admin-empty-state"},Zt={class:"icon-wrapper"},ts={key:1,class:"divide-y divide-border/50"},ss={class:"flex flex-1 items-center justify-between gap-4"},es={class:"flex flex-col gap-1.5"},is={class:"flex items-center gap-2"},as={class:"font-mono text-sm font-semibold text-primary"},os={class:"font-medium"},ns={class:"flex items-center gap-4 text-xs text-muted-foreground"},ls={class:"flex items-center gap-1"},rs={class:"flex items-center gap-1"},ds={class:"flex flex-col items-end gap-1"},us={class:"admin-form-section h-full"},cs={class:"admin-form-section-header"},ms={class:"admin-form-section-content"},fs={key:0,class:"flex flex-col items-center justify-center py-8 text-center"},ps={key:1,class:"flex flex-col gap-3"},xs={class:"flex items-baseline gap-1.5"},gs={class:"text-2xl font-bold tabular-nums"},Es=Z({__name:"Dashboard",props:{stats:{}},setup(r){const y=et(),{isSupported:N,notificationPermission:m,requestPermission:B,watchPendingOrders:f}=yt(),n=z(null);J(()=>{f()});const j=[{title:"Dashboard",href:rt().url}];function P(h){return new Intl.NumberFormat("id-ID").format(h)}function v(h){n.value=h,y.light()}function d(){n.value=null}function C(){y.medium()}function D(h){y.selection(),K.visit(ut(h).url)}function F(){y.selection(),K.visit(W().url)}return(h,e)=>(l(),g(O,null,[i(s(tt),{title:"Admin Dashboard"}),i(at,{breadcrumbs:j},{default:a(()=>[i(lt,null,{default:a(()=>[t("div",vt,[i(s(u),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:s(c).ios,class:"flex flex-col gap-1"},{default:a(()=>[t("div",ht,[e[8]||(e[8]=t("h1",{class:"text-2xl font-bold tracking-tight md:text-3xl"}," Dashboard ",-1)),i(s(ot),{variant:"outline",class:"hidden gap-1.5 md:flex"},{default:a(()=>[i(s(xt),{class:"h-3 w-3 text-primary"}),e[7]||(e[7]=p(" Admin ",-1))]),_:1})]),e[9]||(e[9]=t("p",{class:"text-muted-foreground"}," Selamat datang! Berikut ringkasan performa toko Anda hari ini. ",-1))]),_:1},8,["transition"]),t("div",_t,[i(s(u),{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{...s(c).bouncy,delay:s(b)(0)},class:"lg:col-span-2"},{default:a(()=>[t("div",{class:_(["stats-card group cursor-pointer p-5 transition-transform duration-150",{"scale-[0.98]":n.value==="sales"}]),onMousedown:e[0]||(e[0]=o=>v("sales")),onMouseup:d,onMouseleave:d,onTouchstartPassive:e[1]||(e[1]=o=>v("sales")),onTouchend:d},[e[12]||(e[12]=t("div",{class:"absolute inset-0 opacity-[0.03]"},[t("div",{class:"absolute -right-20 -top-20 h-64 w-64 rounded-full bg-primary blur-3xl"}),t("div",{class:"absolute -bottom-20 -left-20 h-48 w-48 rounded-full bg-accent blur-3xl"})],-1)),t("div",kt,[t("div",bt,[t("div",wt,[e[10]||(e[10]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Total Penjualan",-1)),i(s(ft),{class:"h-4 w-4 text-green-500"})]),i(V,{price:r.stats.total_sales,size:"xl",class:"text-3xl! md:text-4xl!"},null,8,["price"]),e[11]||(e[11]=t("p",{class:"text-xs text-muted-foreground"}," Total revenue keseluruhan ",-1))]),t("div",Mt,[i(s(ct),{class:"h-6 w-6 text-white"})])])],34)]),_:1},8,["transition"]),i(s(u),{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{...s(c).bouncy,delay:s(b)(1)}},{default:a(()=>[t("div",{class:_(["stats-card stats-card--blue group cursor-pointer p-5 transition-transform duration-150",{"scale-[0.98]":n.value==="today"}]),onMousedown:e[2]||(e[2]=o=>v("today")),onMouseup:d,onMouseleave:d,onTouchstartPassive:e[3]||(e[3]=o=>v("today")),onTouchend:d,onClick:F},[t("div",Pt,[t("div",Ct,[e[13]||(e[13]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Pesanan Hari Ini",-1)),t("span",$t,x(P(r.stats.today_orders)),1),e[14]||(e[14]=t("p",{class:"text-xs text-muted-foreground"}," Pesanan masuk ",-1))]),t("div",At,[i(s(q),{class:"h-5 w-5 text-white"})])])],34)]),_:1},8,["transition"]),i(s(u),{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{...s(c).bouncy,delay:s(b)(2)}},{default:a(()=>[t("div",{class:_(["stats-card group cursor-pointer p-5 transition-transform duration-150",[{"scale-[0.98]":n.value==="pending"},r.stats.pending_orders>0?"stats-card--gold":""]]),onMousedown:e[4]||(e[4]=o=>v("pending")),onMouseup:d,onMouseleave:d,onTouchstartPassive:e[5]||(e[5]=o=>v("pending")),onTouchend:d,onClick:F},[t("div",Tt,[t("div",Nt,[t("div",Bt,[e[16]||(e[16]=t("span",{class:"text-sm font-medium text-muted-foreground"},"Pending",-1)),r.stats.pending_orders>0?(l(),g("span",jt,[...e[15]||(e[15]=[t("span",{class:"absolute inline-flex h-2 w-2 animate-ping rounded-full bg-amber-400 opacity-75"},null,-1),t("span",{class:"relative inline-flex h-2 w-2 rounded-full bg-amber-500"},null,-1)])])):L("",!0)]),t("span",St,x(P(r.stats.pending_orders)),1),e[17]||(e[17]=t("p",{class:"text-xs text-muted-foreground"}," Menunggu konfirmasi ",-1))]),t("div",Ot,[i(s(E),{class:"h-5 w-5 text-white"})])])],34)]),_:1},8,["transition"])]),t("div",qt,[i(s(u),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...s(c).ios,delay:s(b)(3)}},{default:a(()=>[i(s(A),{href:s(Q)().url,onClick:C},{default:a(()=>[t("div",{class:_(["stats-card stats-card--success group cursor-pointer p-4 transition-transform duration-150",{"scale-[0.98]":n.value==="products"}]),onMousedown:e[6]||(e[6]=o=>v("products")),onMouseup:d,onMouseleave:d},[t("div",It,[t("div",zt,[i(s(I),{class:"h-5 w-5 text-white"})]),t("div",Dt,[t("span",Ft,x(P(r.stats.active_products)),1),e[18]||(e[18]=t("span",{class:"text-sm text-muted-foreground"},"Produk Aktif",-1))]),i(s(G),{class:"ml-auto h-5 w-5 text-muted-foreground/50 transition-transform group-hover:translate-x-1"})])],34)]),_:1},8,["href"])]),_:1},8,["transition"]),i(s(u),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...s(c).ios,delay:s(b)(4)}},{default:a(()=>[t("div",Lt,[t("div",Ht,[t("div",{class:_(["flex h-12 w-12 items-center justify-center rounded-2xl",s(m)==="granted"?"bg-green-100 dark:bg-green-900/40":"bg-muted"])},[s(m)==="granted"?(l(),k(s(R),{key:0,class:"h-5 w-5 text-green-600 dark:text-green-400"})):s(m)==="denied"?(l(),k(s(pt),{key:1,class:"h-5 w-5 text-red-500"})):(l(),k(s(R),{key:2,class:"h-5 w-5 text-muted-foreground"}))],2),t("div",Kt,[e[19]||(e[19]=t("span",{class:"text-sm font-medium"},"Notifikasi",-1)),t("span",{class:_(["text-xs",s(m)==="granted"?"text-green-600 dark:text-green-400":"text-muted-foreground"])},x(s(m)==="granted"?"Aktif":s(m)==="denied"?"Diblokir":"Tidak aktif"),3)]),s(N)&&s(m)!=="granted"?(l(),k(s(nt),{key:0,size:"sm",variant:"outline",class:"ml-auto ios-button",onClick:s(B)},{default:a(()=>[...e[20]||(e[20]=[p(" Aktifkan ",-1)])]),_:1},8,["onClick"])):L("",!0)])])]),_:1},8,["transition"]),i(s(u),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...s(c).ios,delay:s(b)(5)}},{default:a(()=>[t("div",Rt,[e[23]||(e[23]=t("p",{class:"mb-3 text-xs font-medium uppercase tracking-wider text-muted-foreground"}," Quick Actions ",-1)),t("div",Ut,[i(s(A),{href:s(Q)().url,onClick:C},{default:a(()=>[t("div",Vt,[i(s(I),{class:"text-primary"}),e[21]||(e[21]=p(" Produk ",-1))])]),_:1},8,["href"]),i(s(A),{href:s(dt)().url,onClick:C},{default:a(()=>[t("div",Qt,[i(s(it),{class:"text-primary"}),e[22]||(e[22]=p(" Kategori ",-1))])]),_:1},8,["href"])])])]),_:1},8,["transition"])]),t("div",Wt,[i(s(u),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...s(c).ios,delay:.25},class:"lg:col-span-3"},{default:a(()=>[t("div",Et,[t("div",Gt,[t("div",Jt,[t("h3",null,[i(s(q)),e[24]||(e[24]=p(" Pesanan Terbaru ",-1))]),i(s(A),{href:s(W)().url,class:"text-sm font-medium text-primary hover:underline",onClick:C},{default:a(()=>[...e[25]||(e[25]=[p(" Lihat Semua ",-1)])]),_:1},8,["href"])])]),t("div",Xt,[r.stats.recent_orders.length===0?(l(),g("div",Yt,[t("div",Zt,[i(s(q))]),e[26]||(e[26]=t("h3",null,"Belum Ada Pesanan",-1)),e[27]||(e[27]=t("p",null,"Pesanan customer akan muncul di sini secara real-time.",-1))])):(l(),g("div",ts,[(l(!0),g(O,null,H(r.stats.recent_orders,(o,$)=>(l(),k(s(u),{key:o.id,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{...s(c).ios,delay:.3+$*.05},class:"ios-list-item cursor-pointer p-4 transition-all duration-150 hover:bg-muted/50",role:"button",tabindex:"0",onClick:S=>D(o.id),onKeydown:st(S=>D(o.id),["enter"])},{default:a(()=>[t("div",ss,[t("div",es,[t("div",is,[t("span",as,x(o.order_number),1),i(s(U),{status:o.status},null,8,["status"])]),t("p",os,x(o.customer_name),1),t("div",ns,[t("span",ls,[i(s(I),{class:"h-3 w-3"}),p(" "+x(o.items_count)+" item ",1)]),t("span",rs,[i(s(mt),{class:"h-3 w-3"}),p(" "+x(o.created_at_human),1)])])]),t("div",ds,[i(V,{price:o.total,size:"sm",class:"font-semibold"},null,8,["price"]),i(s(G),{class:"h-4 w-4 text-muted-foreground/50"})])])]),_:2},1032,["transition","onClick","onKeydown"]))),128))]))])])]),_:1},8,["transition"]),i(s(u),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...s(c).ios,delay:.3},class:"lg:col-span-2"},{default:a(()=>[t("div",us,[t("div",cs,[t("h3",null,[i(s(gt)),e[28]||(e[28]=p(" Status Pesanan ",-1))])]),t("div",ms,[Object.keys(r.stats.order_status_breakdown).length===0?(l(),g("div",fs,[i(s(E),{class:"mb-2 h-10 w-10 text-muted-foreground/40"}),e[29]||(e[29]=t("p",{class:"text-sm text-muted-foreground"},"Belum ada data status",-1))])):(l(),g("div",ps,[(l(!0),g(O,null,H(r.stats.order_status_breakdown,(o,$,S)=>(l(),k(s(u),{key:$,initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{...s(c).ios,delay:.35+S*.05},class:"flex items-center justify-between rounded-xl border border-border/50 bg-muted/20 p-3.5 transition-colors hover:bg-muted/40"},{default:a(()=>[i(s(U),{status:$},null,8,["status"]),t("div",xs,[t("span",gs,x(P(o)),1),e[30]||(e[30]=t("span",{class:"text-xs text-muted-foreground"},"pesanan",-1))])]),_:2},1032,["transition"]))),128))]))])])]),_:1},8,["transition"])]),e[31]||(e[31]=t("div",{class:"h-20 md:hidden"},null,-1))])]),_:1})]),_:1})],64))}});export{Es as default};
