import{_ as V}from"./InputError.vue_vue_type_script_setup_true_lang-CT4RYMc3.js";import{_ as F}from"./index-D0cf4wBZ.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-D6HxSglh.js";import{_ as A}from"./Spinner.vue_vue_type_script_setup_true_lang-BUvdC8OF.js";import{_ as G,a as L,b as z}from"./PinInputSlot.vue_vue_type_script_setup_true_lang-Bzaj6QdF.js";import{_ as H}from"./AuthLayout.vue_vue_type_script_setup_true_lang-CaxQ5h-V.js";import{s as j}from"./index-C6DL73fo.js";import{d as U,c as B,r as x,g as f,w as o,b as a,e as d,f as e,h as J,o as m,m as O,D as P,C as R,a as Q,F as W,k as X,q as $,i as S,j as k,t as b}from"./app-Ct3btzCM.js";import{c as Y,u as Z,M as r,s as u,a as c}from"./shopping-bag-DiqdROFR.js";import{u as ee}from"./useSpringAnimation-Brzh961z.js";import{S as te}from"./shield-check-C_oOcpbI.js";import{R as D}from"./refresh-cw-D-PDIKTf.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./loader-circle-BRVTe8q5.js";import"./VisuallyHidden-T8EIVmWz.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./useForwardExpose-DOq4dM8b.js";import"./VisuallyHiddenInput-X3OUI71b.js";import"./index-Dp0PW41R.js";const E=Y("KeyIcon",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),se={class:"flex h-16 w-16 items-center justify-center rounded-2xl bg-primary/10"},oe={class:"space-y-6"},ie=["value"],ne={class:"flex w-full items-center justify-center"},le=["onClick"],re=["onClick"],ue=U({__name:"TwoFactorChallenge",setup(de){const n=Z(),{shakeClass:w,shake:I}=ee(),p=B(()=>y.value?{title:"Kode Pemulihan",description:"Masukkan salah satu kode pemulihan darurat Anda untuk mengakses akun.",toggleText:"Gunakan kode autentikator",icon:E}:{title:"Kode Autentikasi",description:"Masukkan kode 6 digit dari aplikasi autentikator Anda.",toggleText:"Gunakan kode pemulihan",icon:te}),y=x(!1),i=x(!1),_=x(!1),C=T=>{n.selection(),y.value=!y.value,T(),v.value=[]};function M(){n.error(),I()}const v=x([]),K=B(()=>v.value.join(""));return(T,t)=>(m(),f(H,{title:p.value.title,description:p.value.description},{default:o(()=>[a(e(J),{title:"Verifikasi 2FA"}),a(e(r),{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:e(u).bouncy,class:"mb-6 flex justify-center"},{default:o(()=>[d("div",se,[(m(),f(O(p.value.icon),{class:"h-8 w-8 text-primary"}))])]),_:1},8,["transition"]),d("div",oe,[y.value?(m(),f(e(P),R({key:1},e(j).form(),{class:["space-y-6",e(w)],"reset-on-error":"",onError:M}),{default:o(({errors:g,processing:l,clearErrors:h})=>[a(e(r),{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{...e(u).ios,delay:e(c)(0)},class:"grid gap-2"},{default:o(()=>[d("div",{class:$(["relative transition-transform duration-200",{"scale-[1.02]":_.value}])},[a(e(E),{class:"absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a(e(q),{name:"recovery_code",type:"text",placeholder:"Masukkan kode pemulihan",autofocus:y.value,required:"",class:"ios-input h-12 rounded-xl border-0 bg-muted/50 pl-11 text-base focus:bg-background focus:ring-2 focus:ring-primary/20",onFocus:t[8]||(t[8]=s=>{_.value=!0,e(n).selection()}),onBlur:t[9]||(t[9]=s=>_.value=!1)},null,8,["autofocus"])],2),a(V,{message:g.recovery_code,class:"animate-ios-shake"},null,8,["message"])]),_:2},1032,["transition"]),a(e(r),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...e(u).ios,delay:e(c)(1)}},{default:o(()=>[a(e(F),{type:"submit",class:$(["ios-button h-13 w-full rounded-2xl text-base font-semibold shadow-lg transition-all duration-150",{"scale-95":i.value}]),disabled:l,onMousedown:t[10]||(t[10]=s=>{i.value=!0,e(n).medium()}),onMouseup:t[11]||(t[11]=s=>i.value=!1),onMouseleave:t[12]||(t[12]=s=>i.value=!1),onTouchstartPassive:t[13]||(t[13]=s=>{i.value=!0,e(n).medium()}),onTouchend:t[14]||(t[14]=s=>i.value=!1)},{default:o(()=>[l?(m(),f(e(A),{key:0,class:"mr-2"})):S("",!0),k(" "+b(l?"Memverifikasi...":"Verifikasi"),1)]),_:2},1032,["class","disabled"])]),_:2},1032,["transition"]),a(e(r),{initial:{opacity:0},animate:{opacity:1},transition:{...e(u).smooth,delay:e(c)(2)},class:"text-center"},{default:o(()=>[d("button",{type:"button",class:"inline-flex items-center gap-2 text-sm text-muted-foreground transition-colors hover:text-foreground",onClick:()=>C(h)},[a(e(D),{class:"h-3.5 w-3.5"}),k(" "+b(p.value.toggleText),1)],8,re)]),_:2},1032,["transition"])]),_:1},16,["class"])):(m(),f(e(P),R({key:0},e(j).form(),{class:["space-y-6",e(w)],"reset-on-error":"",onError:t[7]||(t[7]=g=>{v.value=[],M()})}),{default:o(({errors:g,processing:l,clearErrors:h})=>[d("input",{type:"hidden",name:"code",value:K.value},null,8,ie),a(e(r),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...e(u).ios,delay:e(c)(0)},class:"flex flex-col items-center justify-center space-y-4"},{default:o(()=>[d("div",ne,[a(e(G),{id:"otp",placeholder:"â—‹",modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),type:"number",otp:"",class:"ios-pin-input"},{default:o(()=>[a(e(L),{class:"gap-2 sm:gap-3"},{default:o(()=>[(m(),Q(W,null,X(6,(s,N)=>a(e(z),{key:s,index:N,disabled:l,autofocus:"",class:"ios-pin-slot h-12 w-10 rounded-xl border-0 bg-muted/50 text-lg font-semibold transition-all focus:bg-background focus:ring-2 focus:ring-primary/30 sm:h-14 sm:w-12 sm:text-xl",onFocus:t[0]||(t[0]=me=>e(n).selection())},null,8,["index","disabled"])),64))]),_:2},1024)]),_:2},1032,["modelValue"])]),a(V,{message:g.code,class:"animate-ios-shake"},null,8,["message"])]),_:2},1032,["transition"]),a(e(r),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...e(u).ios,delay:e(c)(1)}},{default:o(()=>[a(e(F),{type:"submit",class:$(["ios-button h-13 w-full rounded-2xl text-base font-semibold shadow-lg transition-all duration-150",{"scale-95":i.value}]),disabled:l,onMousedown:t[2]||(t[2]=s=>{i.value=!0,e(n).medium()}),onMouseup:t[3]||(t[3]=s=>i.value=!1),onMouseleave:t[4]||(t[4]=s=>i.value=!1),onTouchstartPassive:t[5]||(t[5]=s=>{i.value=!0,e(n).medium()}),onTouchend:t[6]||(t[6]=s=>i.value=!1)},{default:o(()=>[l?(m(),f(e(A),{key:0,class:"mr-2"})):S("",!0),k(" "+b(l?"Memverifikasi...":"Verifikasi"),1)]),_:2},1032,["class","disabled"])]),_:2},1032,["transition"]),a(e(r),{initial:{opacity:0},animate:{opacity:1},transition:{...e(u).smooth,delay:e(c)(2)},class:"text-center"},{default:o(()=>[d("button",{type:"button",class:"inline-flex items-center gap-2 text-sm text-muted-foreground transition-colors hover:text-foreground",onClick:()=>C(h)},[a(e(D),{class:"h-3.5 w-3.5"}),k(" "+b(p.value.toggleText),1)],8,le)]),_:2},1032,["transition"])]),_:1},16,["class"]))]),a(e(r),{initial:{opacity:0},animate:{opacity:1},transition:{...e(u).smooth,delay:e(c)(3)},class:"mt-8 rounded-xl bg-muted/50 p-4 text-center text-xs text-muted-foreground"},{default:o(()=>[...t[15]||(t[15]=[k(" Buka aplikasi autentikator Anda (seperti Google Authenticator atau Authy) untuk mendapatkan kode. ",-1)])]),_:1},8,["transition"])]),_:1},8,["title","description"]))}}),je=ae(ue,[["__scopeId","data-v-0c298606"]]);export{je as default};
