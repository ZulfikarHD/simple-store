import{d as Q,r as k,c as T,g as r,w as n,e as a,q as E,b as l,f as t,p as se,a as j,i as q,t as g,j as x,n as L,o,u as ne,h as le,l as M,F as N,k as oe}from"./app-DFCAcBxY.js";import{_ as H}from"./AnimatePresence.vue-DZMCw1TD.js";import{c as ie,u as G,s as D,M as u}from"./shopping-bag-B6VKI7sq.js";import{h as A}from"./index-Dp0PW41R.js";import{s as U}from"./CheckoutController-BPHuwCVz.js";import{_ as P}from"./index-DLvYs-W1.js";import{u as Y,d as re}from"./CartController-1jpe7Y2F.js";import{T as X}from"./trash-2--vznmpOP.js";import{L as I}from"./loader-circle-6h6_FZdM.js";import{M as ue}from"./minus-DJbWDeJ7.js";import{P as de}from"./plus-DSUd7fEv.js";import{_ as me}from"./CartCounter.vue_vue_type_script_setup_true_lang-mjL_bjvr.js";import{_ as fe}from"./EmptyState.vue_vue_type_script_setup_true_lang-CkmgNrn3.js";import{_ as ce,S as ve,a as pe}from"./StoreHeader.vue_vue_type_script_setup_true_lang-DI0YpbaX.js";import{_ as be}from"./PullToRefresh.vue_vue_type_script_setup_true_lang-CO4V6-sd.js";import{A as xe}from"./arrow-left-BdoA81pv.js";import"./package-C_ORoyoZ.js";import"./user-C_i57HKz.js";const O=ie("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ge={class:"flex items-start gap-3 sm:contents"},ye={class:"h-18 w-18 shrink-0 overflow-hidden rounded-xl bg-muted sm:h-20 sm:w-20"},he=["src","alt"],ke={key:1,class:"flex h-full w-full items-center justify-center bg-muted/50"},we={class:"flex flex-1 flex-col gap-0.5 sm:gap-1"},$e={class:"line-clamp-2 text-sm font-semibold text-foreground sm:line-clamp-1 sm:text-base"},Me={class:"text-sm text-muted-foreground"},Te={key:0,class:"text-xs text-destructive"},je={class:"flex items-center justify-between gap-3 sm:contents"},Pe={class:"flex items-center gap-1.5 sm:gap-2"},Ce={class:"flex flex-col items-end gap-2"},De=Q({__name:"CartItem",props:{item:{},index:{default:0}},setup(i){const v=i,C=G(),p=k(!1),w=k(!1),b=k(!1),d=k(!1),c=k(!1),y=k(0),_=k(0),$=k(!1),h=k(!1),S=T(()=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(v.item.product.price)),B=T(()=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(v.item.subtotal)),e=T(()=>v.item.product.image?`/storage/${v.item.product.image}`:null),m=T(()=>({transform:`translateX(${y.value}px)`,transition:$.value?"none":"transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)"})),K=T(()=>v.index*.05);function J(F){_.value=F.touches[0].clientX,$.value=!0}function W(F){if(!$.value)return;const s=F.touches[0].clientX-_.value;y.value=Math.min(0,Math.max(-100,s)),y.value<=-80&&!h.value?(h.value=!0,C.medium()):y.value>-80&&h.value&&(h.value=!1)}function Z(){$.value=!1,y.value<=-80?R():(y.value=0,h.value=!1)}function ee(){p.value||(C.light(),p.value=!0,L.patch(Y.url(v.item.id),{quantity:v.item.quantity+1},{preserveScroll:!0,onFinish:()=>{p.value=!1}}))}function te(){p.value||v.item.quantity<=1||(C.light(),p.value=!0,L.patch(Y.url(v.item.id),{quantity:v.item.quantity-1},{preserveScroll:!0,onFinish:()=>{p.value=!1}}))}function R(){w.value||(C.heavy(),w.value=!0,L.delete(re.url(v.item.id),{preserveScroll:!0,onFinish:()=>{w.value=!1,y.value=0,h.value=!1}}))}const ae={type:"spring",...D.ios},V={type:"spring",...D.bouncy},z={type:"spring",...D.snappy};return(F,s)=>(o(),r(t(u),{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{...ae,delay:K.value},class:"relative overflow-hidden rounded-2xl"},{default:n(()=>[a("div",{class:E(["absolute inset-y-0 right-0 flex w-24 items-center justify-center bg-destructive transition-opacity duration-200",h.value?"opacity-100":"opacity-0"])},[l(t(X),{class:"h-6 w-6 text-destructive-foreground"})],2),a("div",{class:E(["relative flex flex-col gap-3 rounded-2xl bg-card p-3 shadow-sm transition-shadow sm:flex-row sm:items-center sm:gap-4 sm:p-4",{"opacity-50":w.value}]),style:se(m.value),onTouchstartPassive:J,onTouchmove:W,onTouchend:Z},[a("div",ge,[a("div",ye,[e.value?(o(),j("img",{key:0,src:e.value,alt:i.item.product.name,class:"h-full w-full object-cover",loading:"lazy"},null,8,he)):(o(),j("div",ke,[...s[18]||(s[18]=[a("span",{class:"text-xl sm:text-2xl"},"ðŸ›’",-1)])]))]),a("div",we,[a("h4",$e,g(i.item.product.name),1),a("p",Me,g(S.value),1),i.item.product.is_available?q("",!0):(o(),j("p",Te," Produk tidak tersedia "))]),l(t(u),{animate:{scale:c.value?.9:1},transition:z,class:"sm:hidden"},{default:n(()=>[l(t(P),{variant:"ghost",size:"icon",class:"h-10 w-10 shrink-0 rounded-xl text-destructive hover:bg-destructive/10 hover:text-destructive",disabled:w.value,"aria-label":"Hapus item",onClick:R,onMousedown:s[0]||(s[0]=f=>c.value=!0),onMouseup:s[1]||(s[1]=f=>c.value=!1),onMouseleave:s[2]||(s[2]=f=>c.value=!1),onTouchstartPassive:s[3]||(s[3]=f=>c.value=!0),onTouchend:s[4]||(s[4]=f=>c.value=!1)},{default:n(()=>[w.value?(o(),r(t(I),{key:0,class:"h-4 w-4 animate-spin"})):(o(),r(t(X),{key:1,class:"h-4 w-4"}))]),_:1},8,["disabled"])]),_:1},8,["animate"])]),a("div",je,[a("div",Pe,[l(t(u),{animate:{scale:b.value?.9:1},transition:z},{default:n(()=>[l(t(P),{variant:"outline",size:"icon",class:"h-11 w-11 rounded-xl sm:h-9 sm:w-9",disabled:i.item.quantity<=1||p.value,"aria-label":"Kurangi jumlah",onClick:te,onMousedown:s[5]||(s[5]=f=>b.value=!0),onMouseup:s[6]||(s[6]=f=>b.value=!1),onMouseleave:s[7]||(s[7]=f=>b.value=!1),onTouchstartPassive:s[8]||(s[8]=f=>b.value=!0),onTouchend:s[9]||(s[9]=f=>b.value=!1)},{default:n(()=>[p.value?(o(),r(t(I),{key:0,class:"h-4 w-4 animate-spin"})):(o(),r(t(ue),{key:1,class:"h-4 w-4"}))]),_:1},8,["disabled"])]),_:1},8,["animate"]),(o(),r(t(u),{key:i.item.quantity,initial:{scale:1.2,opacity:0},animate:{scale:1,opacity:1},transition:V,class:"w-10 text-center text-lg font-semibold"},{default:n(()=>[x(g(i.item.quantity),1)]),_:1})),l(t(u),{animate:{scale:d.value?.9:1},transition:z},{default:n(()=>[l(t(P),{variant:"outline",size:"icon",class:"h-11 w-11 rounded-xl sm:h-9 sm:w-9",disabled:p.value,"aria-label":"Tambah jumlah",onClick:ee,onMousedown:s[10]||(s[10]=f=>d.value=!0),onMouseup:s[11]||(s[11]=f=>d.value=!1),onMouseleave:s[12]||(s[12]=f=>d.value=!1),onTouchstartPassive:s[13]||(s[13]=f=>d.value=!0),onTouchend:s[14]||(s[14]=f=>d.value=!1)},{default:n(()=>[p.value?(o(),r(t(I),{key:0,class:"h-4 w-4 animate-spin"})):(o(),r(t(de),{key:1,class:"h-4 w-4"}))]),_:1},8,["disabled"])]),_:1},8,["animate"])]),a("div",Ce,[(o(),r(t(u),{key:i.item.subtotal,initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},transition:V,class:"price-tag text-base font-bold sm:text-lg"},{default:n(()=>[x(g(B.value),1)]),_:1})),l(t(u),{animate:{scale:c.value?.9:1},transition:z,class:"hidden sm:block"},{default:n(()=>[l(t(P),{variant:"ghost",size:"icon",class:"h-9 w-9 rounded-xl text-destructive hover:bg-destructive/10 hover:text-destructive",disabled:w.value,"aria-label":"Hapus item",onClick:R,onMousedown:s[15]||(s[15]=f=>c.value=!0),onMouseup:s[16]||(s[16]=f=>c.value=!1),onMouseleave:s[17]||(s[17]=f=>c.value=!1)},{default:n(()=>[w.value?(o(),r(t(I),{key:0,class:"h-4 w-4 animate-spin"})):(o(),r(t(X),{key:1,class:"h-4 w-4"}))]),_:1},8,["disabled"])]),_:1},8,["animate"])])])],38)]),_:1},8,["transition"]))}}),_e={class:"flex min-h-screen flex-col bg-background"},Se={class:"ios-navbar fixed inset-x-0 top-0 z-50 border-b border-brand-blue-200/30 dark:border-brand-blue-800/30"},ze={class:"mx-auto flex h-14 max-w-7xl items-center justify-between px-4 sm:h-16 sm:px-6 lg:px-8"},Fe={class:"flex items-center gap-2 sm:gap-3"},Ie={class:"mx-auto w-full max-w-7xl flex-1 px-4 py-6 pb-56 sm:px-6 sm:py-8 sm:pb-8 lg:px-8"},qe={class:"mt-1 text-sm text-muted-foreground sm:mt-2 sm:text-base"},Be={key:0,class:"grid gap-6 lg:grid-cols-3 lg:gap-8"},Ke={class:"lg:col-span-2"},Re={class:"space-y-3 sm:space-y-4"},Le={class:"premium-card sticky top-24 rounded-2xl p-6"},Ne={class:"space-y-3"},Ae={class:"flex items-center justify-between text-sm"},Xe={class:"text-muted-foreground"},Ve={class:"flex items-center justify-between rounded-xl bg-gradient-to-r from-brand-blue-50 to-brand-gold-50 p-3 dark:from-brand-blue-900/30 dark:to-brand-gold-900/20"},Ee={class:"mt-16 hidden border-t border-brand-blue-100 bg-gradient-to-b from-brand-blue-50/50 to-white dark:border-brand-blue-900/30 dark:from-brand-blue-900/20 dark:to-background md:block"},He={class:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8"},Ue={class:"flex flex-col items-center gap-2"},Ye={class:"text-center text-sm text-muted-foreground"},Oe={class:"text-xs text-brand-gold"},Qe={class:"mx-auto max-w-7xl"},Ge={class:"mb-3 flex items-center justify-between"},Je={class:"text-sm text-muted-foreground"},bt=Q({__name:"Cart",props:{cart:{}},setup(i){const v=i,C=ne(),p=T(()=>C.props.store??{name:"Simple Store",tagline:"Premium Quality Products",logo:null}),w=G(),b=k(!1),d=k(!1),c=T(()=>v.cart.items.length===0),y=T(()=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(v.cart.subtotal));function _(){w.medium()}const $={type:"spring",...D.ios},h={type:"spring",...D.bouncy},S={type:"spring",...D.snappy};return(B,e)=>(o(),j(N,null,[l(t(le),{title:`Keranjang Belanja - ${p.value.name}`},{default:n(()=>[...e[13]||(e[13]=[a("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1),a("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1)])]),_:1},8,["title"]),a("div",_e,[a("header",Se,[a("div",ze,[l(ce),a("nav",Fe,[l(me,{count:i.cart.total_items},null,8,["count"]),B.$page.props.auth.user?(o(),r(t(M),{key:0,href:"/dashboard",class:"ios-button hidden rounded-xl bg-primary px-4 py-2.5 text-sm font-medium text-primary-foreground shadow-sm sm:inline-flex"},{default:n(()=>[...e[14]||(e[14]=[x(" Dashboard ",-1)])]),_:1})):(o(),j(N,{key:1},[l(t(M),{href:"/login",class:"ios-button hidden rounded-xl px-4 py-2.5 text-sm font-medium text-foreground sm:inline-flex"},{default:n(()=>[...e[15]||(e[15]=[x(" Masuk ",-1)])]),_:1}),l(t(M),{href:"/register",class:"ios-button hidden rounded-xl bg-primary px-4 py-2.5 text-sm font-medium text-primary-foreground shadow-sm sm:inline-flex"},{default:n(()=>[...e[16]||(e[16]=[x(" Daftar ",-1)])]),_:1})],64))])])]),e[26]||(e[26]=a("div",{class:"h-14 sm:h-16"},null,-1)),l(be,null,{default:n(()=>[a("main",Ie,[l(t(u),{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:$},{default:n(()=>[l(t(u),{animate:{scale:b.value?.95:1,opacity:b.value?.7:1},transition:S},{default:n(()=>[l(t(M),{href:t(A)(),class:"ios-button mb-4 inline-flex h-11 items-center gap-2 rounded-xl px-3 text-sm text-muted-foreground hover:bg-accent hover:text-foreground sm:mb-6 sm:h-auto sm:px-0",onMousedown:e[0]||(e[0]=m=>b.value=!0),onMouseup:e[1]||(e[1]=m=>b.value=!1),onMouseleave:e[2]||(e[2]=m=>b.value=!1),onTouchstartPassive:e[3]||(e[3]=m=>b.value=!0),onTouchend:e[4]||(e[4]=m=>b.value=!1)},{default:n(()=>[l(t(xe),{class:"h-4 w-4"}),e[17]||(e[17]=x(" Kembali ke Katalog ",-1))]),_:1},8,["href"])]),_:1},8,["animate"])]),_:1}),l(t(u),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...$,delay:.05},class:"mb-6 sm:mb-8"},{default:n(()=>[e[18]||(e[18]=a("h1",{class:"text-2xl font-bold tracking-tight text-foreground sm:text-3xl"}," Keranjang Belanja ",-1)),a("p",qe,g(c.value?"Keranjang Anda kosong":`${i.cart.total_items} item dalam keranjang`),1)]),_:1},8,["transition"]),l(t(H),null,{default:n(()=>[c.value?(o(),r(t(u),{key:0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{...$,delay:.1}},{default:n(()=>[l(fe,{icon:"ðŸ›’",title:"Keranjang Kosong",description:"Belum ada produk di keranjang. Yuk mulai belanja!"},{action:n(()=>[l(t(M),{href:t(A)()},{default:n(()=>[l(t(P),{class:"ios-button mt-4 gap-2 rounded-xl"},{default:n(()=>[l(t(ve),{class:"h-4 w-4"}),e[19]||(e[19]=x(" Mulai Belanja ",-1))]),_:1})]),_:1},8,["href"])]),_:1})]),_:1},8,["transition"])):q("",!0)]),_:1}),c.value?q("",!0):(o(),j("div",Be,[a("div",Ke,[a("div",Re,[(o(!0),j(N,null,oe(i.cart.items,(m,K)=>(o(),r(De,{key:m.id,item:m,index:K},null,8,["item","index"]))),128))])]),l(t(u),{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{...$,delay:.2},class:"hidden lg:col-span-1 lg:block"},{default:n(()=>[a("div",Le,[e[25]||(e[25]=a("h2",{class:"mb-4 text-lg font-semibold text-foreground"}," Ringkasan Pesanan ",-1)),a("div",Ne,[a("div",Ae,[a("span",Xe,"Subtotal ("+g(i.cart.total_items)+" item)",1),(o(),r(t(u),{key:i.cart.subtotal,initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},transition:h,class:"font-medium text-foreground"},{default:n(()=>[x(g(y.value),1)]),_:1}))]),e[21]||(e[21]=a("div",{class:"flex items-center justify-between text-sm"},[a("span",{class:"text-muted-foreground"},"Ongkos Kirim"),a("span",{class:"font-medium text-brand-gold"},"Dihitung saat checkout")],-1)),e[22]||(e[22]=a("hr",{class:"border-border"},null,-1)),a("div",Ve,[e[20]||(e[20]=a("span",{class:"font-semibold text-foreground"},"Total",-1)),(o(),r(t(u),{key:i.cart.subtotal,initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},transition:h,class:"price-tag text-xl font-bold"},{default:n(()=>[x(g(y.value),1)]),_:1}))])]),l(t(u),{animate:{scale:d.value?.95:1},transition:S},{default:n(()=>[l(t(M),{href:t(U)(),onClick:_},{default:n(()=>[l(t(P),{size:"lg",class:"ios-button mt-6 h-13 w-full gap-2 rounded-2xl bg-gradient-to-r from-brand-blue-500 to-brand-blue-600 shadow-lg shadow-brand-blue-500/25 hover:from-brand-blue-600 hover:to-brand-blue-700",onMousedown:e[5]||(e[5]=m=>d.value=!0),onMouseup:e[6]||(e[6]=m=>d.value=!1),onMouseleave:e[7]||(e[7]=m=>d.value=!1)},{default:n(()=>[e[23]||(e[23]=x(" Lanjut ke Checkout ",-1)),l(t(O),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"])]),_:1},8,["animate"]),l(t(M),{href:t(A)(),class:"mt-4 block text-center text-sm text-muted-foreground transition-colors hover:text-brand-blue"},{default:n(()=>[...e[24]||(e[24]=[x(" atau lanjut belanja ",-1)])]),_:1},8,["href"])])]),_:1},8,["transition"])]))]),a("footer",Ee,[a("div",He,[a("div",Ue,[a("p",Ye," Â© "+g(new Date().getFullYear())+" "+g(p.value.name)+". ",1),a("p",Oe,g(p.value.tagline),1)])])])]),_:1})]),l(t(H),null,{default:n(()=>[c.value?q("",!0):(o(),r(t(u),{key:0,initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:$,class:"ios-glass fixed inset-x-0 bottom-20 z-40 border-t border-brand-blue-200/30 p-4 dark:border-brand-blue-800/30 md:bottom-0 lg:hidden"},{default:n(()=>[a("div",Qe,[a("div",Ge,[a("span",Je,"Total ("+g(i.cart.total_items)+" item)",1),(o(),r(t(u),{key:i.cart.subtotal,initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},transition:h,class:"price-tag text-lg font-bold"},{default:n(()=>[x(g(y.value),1)]),_:1}))]),l(t(u),{animate:{scale:d.value?.95:1},transition:S},{default:n(()=>[l(t(M),{href:t(U)(),class:"block",onClick:_},{default:n(()=>[l(t(P),{size:"lg",class:"ios-button h-13 w-full gap-2 rounded-2xl bg-gradient-to-r from-brand-blue-500 to-brand-blue-600 text-base shadow-lg shadow-brand-blue-500/25 hover:from-brand-blue-600 hover:to-brand-blue-700",onMousedown:e[8]||(e[8]=m=>d.value=!0),onMouseup:e[9]||(e[9]=m=>d.value=!1),onMouseleave:e[10]||(e[10]=m=>d.value=!1),onTouchstartPassive:e[11]||(e[11]=m=>d.value=!0),onTouchend:e[12]||(e[12]=m=>d.value=!1)},{default:n(()=>[e[27]||(e[27]=x(" Lanjut ke Checkout ",-1)),l(t(O),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"])]),_:1},8,["animate"])])]),_:1}))]),_:1}),l(pe)],64))}});export{bt as default};
