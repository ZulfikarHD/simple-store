import{d as K,r as x,c as E,a as V,b as s,f as a,h as R,w as l,e as t,t as k,s as H,j as n,q as b,v as M,x as J,o as y,F as $,k as q,B as O,g as F,i as W,n as N}from"./app-DSPqtYEA.js";import{_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-DtjVvbFn.js";import{_ as h}from"./index-Dsc1wCqm.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-CtoHWc1z.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-DXXTXolm.js";import{_ as G}from"./Checkbox.vue_vue_type_script_setup_true_lang-BIqO3qLI.js";import{_ as v}from"./InputError.vue_vue_type_script_setup_true_lang-BaANgvvx.js";import{_ as Q}from"./PullToRefresh.vue_vue_type_script_setup_true_lang-BeFEXtXq.js";import{d as Y,b as j,h as Z}from"./index-7PYCkdjy.js";import{u as ee,M as c,s as p,a as P}from"./shopping-bag-C-Gzps6_.js";import{A as te}from"./arrow-left-Bg55SCSD.js";import{P as ae}from"./package-BvM9jlAc.js";import{D as se,B as ie}from"./dollar-sign-ZNfsyWUW.js";import{I as oe}from"./image-plus-BCugr1Sp.js";import{X as le}from"./x-DHZVLa7e.js";import{I as ne}from"./image-CsyzAQfZ.js";import{U as re}from"./upload-BBf7zcXs.js";import{C as de}from"./circle-check-big-Cn2zWQSE.js";import{S as me}from"./star-CpPG8FF7.js";import{S as L}from"./save-DIjgWEpC.js";import"./VisuallyHidden-CTFQ08va.js";import"./useForwardExpose-O5jwXdh5.js";import"./RovingFocusGroup-CchVQHGI.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-Dp0PW41R.js";import"./settings-DRxyW0OM.js";import"./log-out-6oYP-SbZ.js";import"./chevron-right-B6kAj4zE.js";import"./PriceDisplay.vue_vue_type_script_setup_true_lang-w5cOem3C.js";import"./lock-BXoY3J-W.js";import"./loader-circle-D-MAh7t_.js";import"./clock-BWHIeqMG.js";import"./phone-DTHPqyor.js";import"./check-Cb---SjT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VisuallyHiddenInput-CUhu7TmK.js";const ue={class:"admin-page flex flex-col gap-6 p-4 md:p-6"},ce={class:"flex items-center gap-3"},pe={class:"flex flex-col gap-1"},fe={class:"text-muted-foreground"},ge={class:"flex flex-col gap-6 lg:col-span-2"},ve={class:"admin-form-section"},_e={class:"admin-form-section-header"},xe={class:"admin-form-section-content"},ke={class:"flex flex-col gap-5"},be={class:"admin-input-group"},ye={class:"admin-input-group"},he={class:"grid gap-5 sm:grid-cols-2"},we={class:"admin-input-group"},Pe={class:"admin-input-group"},Se={class:"admin-input-group"},Ue=["value"],Ve={class:"admin-form-section"},Ce={class:"admin-form-section-header"},Be={class:"admin-form-section-content"},Ie={class:"flex flex-col gap-4"},De={class:"admin-image-preview"},Ee=["src"],Me={class:"flex items-center gap-2 text-sm font-medium text-muted-foreground"},$e={class:"admin-image-preview"},Fe=["src","alt"],Ne={class:"admin-upload-area"},Ge={class:"upload-icon"},je={class:"mb-2 text-sm font-medium"},Le={class:"flex flex-col gap-6"},Te={class:"admin-form-section"},ze={class:"admin-form-section-header"},Ae={class:"admin-form-section-content"},Ke={class:"flex flex-col gap-4"},Re={class:"flex items-start gap-3 rounded-xl border border-border/50 bg-muted/20 p-4"},He={class:"flex flex-col"},Je={class:"flex items-start gap-3 rounded-xl border border-border/50 bg-muted/20 p-4"},qe={class:"flex flex-col"},Oe={class:"admin-form-section"},We={class:"admin-form-section-content flex flex-col gap-3"},Xe={class:"fixed inset-x-0 bottom-0 z-40 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 md:hidden",style:{"padding-bottom":"env(safe-area-inset-bottom)"}},Qe={class:"flex gap-3 p-4"},$t=K({__name:"Edit",props:{product:{},categories:{}},setup(_){const f=ee(),m=_,T=[{title:"Dashboard",href:Y().url},{title:"Produk",href:j().url},{title:"Edit Produk",href:"#"}],i=x({name:m.product.name,description:m.product.description||"",price:m.product.price.toString(),stock:m.product.stock.toString(),category_id:m.product.category_id.toString(),image:null,is_active:m.product.is_active,is_featured:m.product.is_featured}),r=x({}),g=x(!1),w=x(null),B=E(()=>!!m.product.image),S=x(!0),I=E(()=>m.product.image?`/storage/${m.product.image}`:null);function z(d){f.selection();const o=d.target.files?.[0];o&&(i.value.image=o,w.value=URL.createObjectURL(o),S.value=!1)}function A(){f.light(),i.value.image=null,w.value=null,S.value=B.value}function D(){f.medium(),g.value=!0,r.value={};const d=new FormData;d.append("_method","PUT"),d.append("name",i.value.name),d.append("description",i.value.description||""),d.append("price",i.value.price),d.append("stock",i.value.stock),d.append("category_id",i.value.category_id),d.append("is_active",i.value.is_active?"1":"0"),d.append("is_featured",i.value.is_featured?"1":"0"),i.value.image&&d.append("image",i.value.image),N.post(Z(m.product.id).url,d,{forceFormData:!0,onSuccess:()=>{f.success()},onError:e=>{f.error(),r.value=e},onFinish:()=>{g.value=!1}})}function U(){f.light(),N.get(j().url)}return(d,e)=>(y(),V($,null,[s(a(R),{title:`Edit ${_.product.name}`},null,8,["title"]),s(X,{breadcrumbs:T},{default:l(()=>[s(Q,null,{default:l(()=>[t("div",ue,[s(a(c),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:a(p).ios,class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},{default:l(()=>[t("div",ce,[s(a(h),{variant:"ghost",size:"icon",class:"ios-button h-10 w-10 shrink-0",onClick:U},{default:l(()=>[s(a(te),{class:"h-5 w-5"})]),_:1}),t("div",pe,[e[7]||(e[7]=t("h1",{class:"text-2xl font-bold tracking-tight md:text-3xl"}," Edit Produk ",-1)),t("p",fe,' Ubah informasi "'+k(_.product.name)+'" ',1)])])]),_:1},8,["transition"]),t("form",{id:"product-form",onSubmit:H(D,["prevent"]),class:"grid gap-6 lg:grid-cols-3"},[t("div",ge,[s(a(c),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...a(p).ios,delay:a(P)(0)}},{default:l(()=>[t("div",ve,[t("div",_e,[t("h3",null,[s(a(ae)),e[8]||(e[8]=n(" Informasi Produk ",-1))])]),t("div",xe,[t("div",ke,[t("div",be,[s(a(u),{for:"name"},{default:l(()=>[...e[9]||(e[9]=[n("Nama Produk *",-1)])]),_:1}),s(a(C),{id:"name",modelValue:i.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value.name=o),type:"text",placeholder:"Masukkan nama produk",class:b(["admin-input",{"border-destructive":r.value.name}])},null,8,["modelValue","class"]),s(v,{message:r.value.name},null,8,["message"])]),t("div",ye,[s(a(u),{for:"description"},{default:l(()=>[...e[10]||(e[10]=[n("Deskripsi",-1)])]),_:1}),M(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=o=>i.value.description=o),rows:"4",placeholder:"Masukkan deskripsi produk",class:b(["admin-textarea",{"border-destructive":r.value.description}])},null,2),[[J,i.value.description]]),s(v,{message:r.value.description},null,8,["message"])]),t("div",he,[t("div",we,[s(a(u),{for:"price",class:"flex items-center gap-2"},{default:l(()=>[s(a(se),{class:"h-4 w-4 text-primary"}),e[11]||(e[11]=n(" Harga (Rp) * ",-1))]),_:1}),s(a(C),{id:"price",modelValue:i.value.price,"onUpdate:modelValue":e[2]||(e[2]=o=>i.value.price=o),type:"number",min:"0",placeholder:"0",class:b(["admin-input",{"border-destructive":r.value.price}])},null,8,["modelValue","class"]),s(v,{message:r.value.price},null,8,["message"])]),t("div",Pe,[s(a(u),{for:"stock",class:"flex items-center gap-2"},{default:l(()=>[s(a(ie),{class:"h-4 w-4 text-primary"}),e[12]||(e[12]=n(" Stok * ",-1))]),_:1}),s(a(C),{id:"stock",modelValue:i.value.stock,"onUpdate:modelValue":e[3]||(e[3]=o=>i.value.stock=o),type:"number",min:"0",placeholder:"0",class:b(["admin-input",{"border-destructive":r.value.stock}])},null,8,["modelValue","class"]),s(v,{message:r.value.stock},null,8,["message"])])]),t("div",Se,[s(a(u),{for:"category_id"},{default:l(()=>[...e[13]||(e[13]=[n("Kategori *",-1)])]),_:1}),M(t("select",{id:"category_id","onUpdate:modelValue":e[4]||(e[4]=o=>i.value.category_id=o),class:b(["admin-select",{"border-destructive":r.value.category_id}])},[e[14]||(e[14]=t("option",{value:"",disabled:""},"Pilih kategori",-1)),(y(!0),V($,null,q(_.categories,o=>(y(),V("option",{key:o.id,value:o.id},k(o.name),9,Ue))),128))],2),[[O,i.value.category_id]]),s(v,{message:r.value.category_id},null,8,["message"])])])])])]),_:1},8,["transition"]),s(a(c),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...a(p).ios,delay:a(P)(1)}},{default:l(()=>[t("div",Ve,[t("div",Ce,[t("h3",null,[s(a(oe)),e[15]||(e[15]=n(" Gambar Produk ",-1))])]),t("div",Be,[t("div",Ie,[w.value?(y(),F(a(c),{key:0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:a(p).bouncy,class:"flex flex-col gap-2"},{default:l(()=>[e[16]||(e[16]=t("p",{class:"text-sm font-medium text-green-600 dark:text-green-400"}," Gambar Baru (akan menggantikan gambar lama) ",-1)),t("div",De,[t("img",{src:w.value,alt:"Preview"},null,8,Ee),t("button",{type:"button",class:"remove-btn ios-button",onClick:A},[s(a(le))])])]),_:1},8,["transition"])):S.value&&I.value?(y(),F(a(c),{key:1,initial:{opacity:0},animate:{opacity:1},transition:a(p).ios,class:"flex flex-col gap-2"},{default:l(()=>[t("div",Me,[s(a(ne),{class:"h-4 w-4"}),e[17]||(e[17]=n(" Gambar Saat Ini ",-1))]),t("div",$e,[t("img",{src:I.value,alt:_.product.name},null,8,Fe)])]),_:1},8,["transition"])):W("",!0),t("div",Ne,[t("div",Ge,[s(a(re))]),t("p",je,k(B.value?"Klik untuk mengganti gambar":"Klik atau drag file untuk upload"),1),e[18]||(e[18]=t("p",{class:"text-xs text-muted-foreground"}," PNG, JPG, JPEG atau WEBP (maks. 2MB) ",-1)),t("input",{type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp",class:"absolute inset-0 cursor-pointer opacity-0",onChange:z},null,32)]),s(v,{message:r.value.image},null,8,["message"])])])])]),_:1},8,["transition"])]),t("div",Le,[s(a(c),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...a(p).ios,delay:a(P)(2)}},{default:l(()=>[t("div",Te,[t("div",ze,[t("h3",null,[s(a(de)),e[19]||(e[19]=n(" Status Produk ",-1))])]),t("div",Ae,[t("div",Ke,[t("div",Re,[s(a(G),{id:"is_active",checked:i.value.is_active,"onUpdate:checked":e[5]||(e[5]=o=>i.value.is_active=o)},null,8,["checked"]),t("div",He,[s(a(u),{for:"is_active",class:"cursor-pointer font-medium"},{default:l(()=>[...e[20]||(e[20]=[n(" Produk Aktif ",-1)])]),_:1}),e[21]||(e[21]=t("p",{class:"text-xs text-muted-foreground"}," Produk akan ditampilkan di toko ",-1))])]),t("div",Je,[s(a(G),{id:"is_featured",checked:i.value.is_featured,"onUpdate:checked":e[6]||(e[6]=o=>i.value.is_featured=o)},null,8,["checked"]),t("div",qe,[s(a(u),{for:"is_featured",class:"flex cursor-pointer items-center gap-2 font-medium"},{default:l(()=>[s(a(me),{class:"h-4 w-4 text-amber-500"}),e[22]||(e[22]=n(" Produk Unggulan ",-1))]),_:1}),e[23]||(e[23]=t("p",{class:"text-xs text-muted-foreground"}," Tampilkan di bagian featured ",-1))])])])])])]),_:1},8,["transition"]),s(a(c),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...a(p).ios,delay:a(P)(3)}},{default:l(()=>[t("div",Oe,[t("div",We,[s(a(h),{type:"submit",class:"admin-btn-primary gap-2",disabled:g.value},{default:l(()=>[s(a(L),{class:"h-4 w-4"}),n(" "+k(g.value?"Menyimpan...":"Simpan Perubahan"),1)]),_:1},8,["disabled"]),s(a(h),{type:"button",variant:"outline",class:"admin-btn-secondary",onClick:U},{default:l(()=>[...e[24]||(e[24]=[n(" Batal ",-1)])]),_:1})])])]),_:1},8,["transition"])])],32),e[25]||(e[25]=t("div",{class:"h-36 md:hidden"},null,-1))])]),_:1}),t("div",Xe,[t("div",Qe,[s(a(h),{type:"button",variant:"outline",class:"h-12 flex-1",onClick:U},{default:l(()=>[...e[26]||(e[26]=[n(" Batal ",-1)])]),_:1}),s(a(h),{type:"submit",form:"product-form",class:"h-12 flex-1 gap-2",disabled:g.value,onClick:D},{default:l(()=>[s(a(L),{class:"h-4 w-4"}),n(" "+k(g.value?"Menyimpan...":"Simpan"),1)]),_:1},8,["disabled"])])])]),_:1})],64))}});export{$t as default};
