import{d as z,u as H,c as L,H as U,r as $,a as c,b as a,e as t,w as o,f as s,h as q,g as v,i as T,o as m,j as f,t as n,s as I,q as C,F as M,k as K}from"./app-CZppbeYQ.js";import{_ as E}from"./AnimatePresence.vue-BCT8tUuZ.js";import{u as G,s as h,M as i}from"./shopping-bag-CgJLrDmv.js";import{h as V}from"./index-Dp0PW41R.js";import{_ as O}from"./StoreHeader.vue_vue_type_script_setup_true_lang-BO1oy3sZ.js";import{_ as w}from"./index-Cc65Ncch.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-D5qj-S-y.js";import{_ as R}from"./Label.vue_vue_type_script_setup_true_lang-BiUR-eYh.js";import{H as j,P as X}from"./package-D47XvBWL.js";import{C as Y}from"./circle-x-BDGHwrPP.js";import{S as N}from"./shield-check-CFRMjlmf.js";import{L as J}from"./lock-wwAmgkYU.js";import{P as S}from"./phone-CutlmKqZ.js";import{C as W}from"./circle-alert-C70UCszn.js";import{C as Z}from"./circle-check-Dq0cs3o_.js";import{U as D}from"./user-BcBa71Ld.js";import{M as ee}from"./map-pin-BHQg_jdA.js";import{F as te}from"./file-text-NiSgRPA5.js";import"./useForwardExpose-BON2X7ZT.js";const se={class:"min-h-screen bg-background"},ae={class:"ios-navbar fixed inset-x-0 top-0 z-50 border-b border-brand-blue-200/30 dark:border-brand-blue-800/30"},re={class:"mx-auto flex h-14 max-w-7xl items-center justify-between px-4 sm:h-16 sm:px-6 lg:px-8"},oe=["href"],ne={class:"mx-auto max-w-2xl px-4 py-8 sm:px-6 lg:px-8"},ie={class:"mb-2 text-muted-foreground"},de=["href"],le={class:"mb-8 text-center"},ue={class:"flex items-start gap-3"},me={class:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-brand-blue shadow-sm"},fe={class:"space-y-2"},be={key:0,class:"flex items-center gap-1 text-sm text-red-600 dark:text-red-400"},xe={key:1,class:"text-xs text-muted-foreground"},ce={class:"mb-8 text-center"},pe={class:"mt-2 text-sm text-muted-foreground sm:text-base"},ge={class:"mb-4 flex items-center gap-2 text-lg font-semibold text-foreground"},ye={class:"space-y-4"},ke={class:"flex items-start gap-3"},ve={class:"font-medium text-foreground"},he={class:"flex items-start gap-3"},we={class:"font-medium text-foreground"},_e={class:"flex items-start gap-3"},Pe={class:"font-medium text-foreground"},$e={key:0,class:"flex items-start gap-3"},Te={class:"font-medium text-foreground"},Ce={class:"mb-4 flex items-center gap-2 text-lg font-semibold text-foreground"},Me={class:"mb-4 space-y-3"},Ve={class:"text-sm font-medium text-foreground"},je={class:"text-xs text-muted-foreground"},Ne={class:"text-sm font-medium text-foreground"},Se={class:"space-y-2"},De={class:"flex items-center justify-between text-sm"},Fe={class:"font-medium text-foreground"},Ae={class:"flex items-center justify-between text-sm"},Be={class:"font-medium text-brand-gold"},ze={class:"flex items-center justify-between rounded-xl bg-gradient-to-r from-brand-blue-50 to-brand-gold-50 p-3 dark:from-brand-blue-900/30 dark:to-brand-gold-900/20"},He={class:"price-tag text-xl font-bold"},Le={class:"text-center text-sm text-brand-blue-700 dark:text-brand-blue-200"},Ue={class:"mt-16 border-t border-brand-blue-100 bg-gradient-to-b from-brand-blue-50/50 to-white dark:border-brand-blue-900/30 dark:from-brand-blue-900/20 dark:to-background"},qe={class:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8"},Ie={class:"flex flex-col items-center gap-2"},Ke={class:"text-center text-sm text-muted-foreground"},Ee={class:"text-xs text-brand-gold"},ut=z({__name:"PublicOrderView",props:{order:{},ulid:{},expired:{type:Boolean},verified:{type:Boolean},orderNumber:{}},setup(r){const F=r,A=H(),y=L(()=>A.props.store??{name:"Simple Store",tagline:"Premium Quality Products",logo:null}),k=G(),u=U({customer_phone:""});function B(){k.light(),u.post(`/orders/${F.ulid}/verify`,{preserveScroll:!0,onSuccess:()=>{k.success()},onError:()=>{k.error()}})}const b=$(!1),x=$(!1);function p(P){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(P)}const l={type:"spring",...h.ios},g={type:"spring",...h.bouncy},_={type:"spring",...h.snappy};return(P,e)=>(m(),c(M,null,[a(s(q),{title:`Verifikasi Pesanan - ${y.value.name}`},{default:o(()=>[...e[11]||(e[11]=[t("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1),t("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1)])]),_:1},8,["title"]),t("div",se,[t("header",ae,[t("div",re,[a(s(i),{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:l},{default:o(()=>[a(O)]),_:1}),a(s(i),{animate:{scale:x.value?.95:1},transition:_},{default:o(()=>[t("a",{href:s(V)()},[a(s(w),{variant:"outline",size:"sm",class:"ios-button rounded-xl",onMousedown:e[0]||(e[0]=d=>x.value=!0),onMouseup:e[1]||(e[1]=d=>x.value=!1),onMouseleave:e[2]||(e[2]=d=>x.value=!1),onTouchstartPassive:e[3]||(e[3]=d=>x.value=!0),onTouchend:e[4]||(e[4]=d=>x.value=!1)},{default:o(()=>[a(s(j),{class:"h-4 w-4 sm:mr-2"}),e[12]||(e[12]=t("span",{class:"hidden sm:inline"},"Beranda",-1))]),_:1})],8,oe)]),_:1},8,["animate"])])]),e[34]||(e[34]=t("div",{class:"h-14 sm:h-16"},null,-1)),t("main",ne,[a(s(E),{mode:"wait"},{default:o(()=>[r.expired?(m(),v(s(i),{key:"expired",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:l,class:"text-center"},{default:o(()=>[a(s(i),{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{...g,delay:.2},class:"mb-6 inline-flex h-24 w-24 items-center justify-center rounded-full bg-gradient-to-br from-red-100 to-orange-100 shadow-lg dark:from-red-900/30 dark:to-orange-900/30"},{default:o(()=>[a(s(Y),{class:"h-12 w-12 text-red-600 dark:text-red-400"})]),_:1},8,["transition"]),e[16]||(e[16]=t("h1",{class:"mb-4 text-2xl font-bold tracking-tight text-foreground sm:text-3xl"}," Akses Tidak Tersedia ",-1)),t("p",ie,[e[13]||(e[13]=f(" Pesanan ",-1)),t("strong",null,n(r.orderNumber),1),e[14]||(e[14]=f(" sudah tidak dapat diakses ",-1))]),e[17]||(e[17]=t("p",{class:"text-sm text-muted-foreground"}," Akses ke pesanan ini telah kedaluwarsa karena pesanan telah selesai atau dibatalkan. ",-1)),a(s(i),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...l,delay:.4},class:"mt-8"},{default:o(()=>[t("a",{href:s(V)()},[a(s(w),{size:"lg",class:"ios-button gap-2 rounded-xl"},{default:o(()=>[a(s(j),{class:"h-4 w-4"}),e[15]||(e[15]=f(" Kembali ke Beranda ",-1))]),_:1})],8,de)]),_:1},8,["transition"])]),_:1})):!r.order||!r.verified?(m(),v(s(i),{key:"verification",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:l},{default:o(()=>[t("div",le,[a(s(i),{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{...g,delay:.2},class:"mb-4 inline-flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-brand-blue-100 to-brand-gold-100 shadow-lg dark:from-brand-blue-900/30 dark:to-brand-gold-900/30"},{default:o(()=>[a(s(N),{class:"h-10 w-10 text-brand-blue"})]),_:1},8,["transition"]),a(s(i),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...l,delay:.3}},{default:o(()=>[...e[18]||(e[18]=[t("h1",{class:"text-2xl font-bold tracking-tight text-foreground sm:text-3xl"}," Verifikasi Nomor Telepon ",-1),t("p",{class:"mt-2 text-sm text-muted-foreground sm:text-base"}," Untuk keamanan, silakan verifikasi nomor telepon Anda ",-1)])]),_:1},8,["transition"])]),a(s(i),{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{...g,delay:.4},class:"mb-6 overflow-hidden rounded-2xl border border-brand-blue-200 bg-gradient-to-r from-brand-blue-50 to-white p-4 dark:border-brand-blue-800/30 dark:from-brand-blue-900/20 dark:to-background"},{default:o(()=>[t("div",ue,[t("div",me,[a(s(J),{class:"h-4 w-4 text-white"})]),e[19]||(e[19]=t("div",{class:"flex-1"},[t("p",{class:"text-sm font-semibold text-foreground"},"Perlindungan Privasi"),t("p",{class:"mt-1 text-xs text-muted-foreground"}," Masukkan nomor telepon yang Anda gunakan saat memesan untuk mengakses detail pesanan. ")],-1))])]),_:1},8,["transition"]),a(s(i),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...l,delay:.5},class:"ios-card rounded-2xl border border-brand-blue-100 bg-card p-6 dark:border-brand-blue-800/30"},{default:o(()=>[t("form",{onSubmit:I(B,["prevent"]),class:"space-y-6"},[t("div",fe,[a(s(R),{for:"customer_phone",class:"flex items-center gap-2"},{default:o(()=>[a(s(S),{class:"h-4 w-4 text-brand-blue"}),e[20]||(e[20]=f(" Nomor Telepon ",-1))]),_:1}),a(s(Q),{id:"customer_phone",modelValue:s(u).customer_phone,"onUpdate:modelValue":e[5]||(e[5]=d=>s(u).customer_phone=d),type:"tel",placeholder:"08xxxxxxxxxx atau +62xxxxxxxxxx",class:C(["ios-input h-12 rounded-xl",{"border-red-500 focus-visible:ring-red-500":s(u).errors.customer_phone}]),disabled:s(u).processing,required:""},null,8,["modelValue","class","disabled"]),s(u).errors.customer_phone?(m(),c("p",be,[a(s(W),{class:"h-4 w-4"}),f(" "+n(s(u).errors.customer_phone),1)])):(m(),c("p",xe," Gunakan nomor yang sama dengan saat memesan "))]),a(s(i),{animate:{scale:b.value?.97:1},transition:_},{default:o(()=>[a(s(w),{type:"submit",size:"lg",class:"ios-button w-full gap-2 rounded-xl",disabled:s(u).processing,onMousedown:e[6]||(e[6]=d=>b.value=!0),onMouseup:e[7]||(e[7]=d=>b.value=!1),onMouseleave:e[8]||(e[8]=d=>b.value=!1),onTouchstartPassive:e[9]||(e[9]=d=>b.value=!0),onTouchend:e[10]||(e[10]=d=>b.value=!1)},{default:o(()=>[a(s(N),{class:"h-5 w-5"}),f(" "+n(s(u).processing?"Memverifikasi...":"Verifikasi & Lihat Pesanan"),1)]),_:1},8,["disabled"])]),_:1},8,["animate"])],32)]),_:1},8,["transition"]),a(s(i),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...l,delay:.6},class:"mt-6 rounded-2xl border border-brand-gold-200 bg-gradient-to-r from-brand-gold-50 to-white p-4 dark:border-brand-gold-800/30 dark:from-brand-gold-900/20 dark:to-background"},{default:o(()=>[...e[21]||(e[21]=[t("p",{class:"text-center text-xs text-muted-foreground"}," ðŸ”’ Data Anda aman dan terenkripsi. Kami melindungi privasi informasi pesanan Anda. ",-1)])]),_:1},8,["transition"])]),_:1})):r.order&&r.verified?(m(),v(s(i),{key:"order-details",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:l},{default:o(()=>[t("div",ce,[a(s(i),{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{...g,delay:.2},class:"mb-4 inline-flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-green-100 to-brand-gold-100 shadow-lg dark:from-green-900/30 dark:to-brand-gold-900/30"},{default:o(()=>[a(s(Z),{class:"h-10 w-10 text-green-600 dark:text-green-400"})]),_:1},8,["transition"]),a(s(i),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...l,delay:.3}},{default:o(()=>[e[22]||(e[22]=t("h1",{class:"text-2xl font-bold tracking-tight text-foreground sm:text-3xl"}," Detail Pesanan ",-1)),t("p",pe," Pesanan #"+n(r.order.order_number),1)]),_:1},8,["transition"])]),a(s(i),{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{...l,delay:.4},class:"mb-6 flex justify-center"},{default:o(()=>[t("div",{class:C(["inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200":r.order.status==="pending","bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200":r.order.status==="confirmed"||r.order.status==="preparing","bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200":r.order.status==="ready"||r.order.status==="delivered","bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200":r.order.status==="cancelled"}])},n(r.order.status_label),3)]),_:1},8,["transition"]),a(s(i),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...l,delay:.5},class:"ios-card mb-6 rounded-2xl border border-brand-blue-100 bg-card p-6 dark:border-brand-blue-800/30"},{default:o(()=>[t("h2",ge,[a(s(D),{class:"h-5 w-5 text-brand-blue"}),e[23]||(e[23]=f(" Data Penerima ",-1))]),t("div",ye,[t("div",ke,[a(s(D),{class:"mt-0.5 h-4 w-4 text-muted-foreground"}),t("div",null,[e[24]||(e[24]=t("p",{class:"text-sm text-muted-foreground"},"Nama",-1)),t("p",ve,n(r.order.customer_name),1)])]),t("div",he,[a(s(S),{class:"mt-0.5 h-4 w-4 text-muted-foreground"}),t("div",null,[e[25]||(e[25]=t("p",{class:"text-sm text-muted-foreground"},"Telepon",-1)),t("p",we,n(r.order.customer_phone),1)])]),t("div",_e,[a(s(ee),{class:"mt-0.5 h-4 w-4 text-muted-foreground"}),t("div",null,[e[26]||(e[26]=t("p",{class:"text-sm text-muted-foreground"},"Alamat",-1)),t("p",Pe,n(r.order.customer_address),1)])]),r.order.notes?(m(),c("div",$e,[a(s(te),{class:"mt-0.5 h-4 w-4 text-muted-foreground"}),t("div",null,[e[27]||(e[27]=t("p",{class:"text-sm text-muted-foreground"},"Catatan",-1)),t("p",Te,n(r.order.notes),1)])])):T("",!0)])]),_:1},8,["transition"]),a(s(i),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...l,delay:.6},class:"ios-card mb-6 rounded-2xl border border-brand-blue-100 bg-card p-6 dark:border-brand-blue-800/30"},{default:o(()=>[t("h2",Ce,[a(s(X),{class:"h-5 w-5 text-brand-blue"}),e[28]||(e[28]=f(" Detail Pesanan ",-1))]),t("div",Me,[(m(!0),c(M,null,K(r.order.items,d=>(m(),c("div",{key:d.id,class:"flex items-center justify-between rounded-xl bg-muted/50 p-3"},[t("div",null,[t("p",Ve,n(d.product_name),1),t("p",je,n(d.quantity)+" x "+n(p(d.product_price)),1)]),t("p",Ne,n(p(d.subtotal)),1)]))),128))]),e[33]||(e[33]=t("hr",{class:"my-4 border-border"},null,-1)),t("div",Se,[t("div",De,[e[29]||(e[29]=t("span",{class:"text-muted-foreground"},"Subtotal",-1)),t("span",Fe,n(p(r.order.subtotal)),1)]),t("div",Ae,[e[30]||(e[30]=t("span",{class:"text-muted-foreground"},"Ongkos Kirim",-1)),t("span",Be,n(r.order.delivery_fee>0?p(r.order.delivery_fee):"Gratis"),1)]),e[32]||(e[32]=t("hr",{class:"border-border"},null,-1)),t("div",ze,[e[31]||(e[31]=t("span",{class:"font-semibold text-foreground"},"Total",-1)),t("span",He,n(p(r.order.total)),1)])])]),_:1},8,["transition"]),a(s(i),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...l,delay:.7},class:"rounded-2xl border border-brand-blue-200 bg-gradient-to-r from-brand-blue-50 to-brand-gold-50 p-4 dark:border-brand-blue-800/30 dark:from-brand-blue-900/20 dark:to-brand-gold-900/20"},{default:o(()=>[t("p",Le," ðŸ“¦ Pesanan dibuat "+n(r.order.timestamps.created_at_human),1)]),_:1},8,["transition"])]),_:1})):T("",!0)]),_:1})]),t("footer",Ue,[t("div",qe,[t("div",Ie,[t("p",Ke," Â© "+n(new Date().getFullYear())+" "+n(y.value.name)+". ",1),t("p",Ee,n(y.value.tagline),1)])])])])],64))}});export{ut as default};
