import{d as E,r as h,c as x,g as r,f as t,q as c,w as a,b as o,e as y,l as I,a as k,i as u,j,t as d,s as m,o as s,n as A}from"./app-CAYXbVeM.js";import{_ as F}from"./AnimatePresence.vue-I5d1-M7B.js";import{u as H,s as C,M as n}from"./shopping-bag-BiuUpbGV.js";import{_ as N}from"./package-BmKyDxuD.js";import{_ as L}from"./index-1PViEHjy.js";import{s as U}from"./ProductController-0M3t1kra.js";import{s as R}from"./CartController-1jpe7Y2F.js";import{S as G}from"./StoreHeader.vue_vue_type_script_setup_true_lang-BY5xUWUz.js";import{L as J}from"./loader-circle-Zm1edA7y.js";import{C as K}from"./check-QY5SULjT.js";import{P as O}from"./plus-CVb-gECD.js";const Q=["src","alt"],W={key:1,class:"flex h-full w-full items-center justify-center bg-muted/50"},X={key:0,class:"mb-0.5 text-[10px] font-medium uppercase tracking-wider text-muted-foreground/80 sm:mb-1 sm:text-xs"},Y={key:1,class:"mb-2 line-clamp-2 hidden text-xs text-muted-foreground sm:mb-3 sm:block sm:text-sm"},Z={class:"mt-auto flex items-center justify-between gap-2"},ee={class:"price-tag text-base font-bold sm:text-lg"},fe=E({__name:"ProductCard",props:{product:{},mode:{default:"grid"},index:{default:0}},setup(e){const i=e,f=H(),l=h(!1),g=h(!1),w=h(!1),P=h(!1),V=x(()=>U.url(i.product.slug)),$=x(()=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(i.product.price)),p=x(()=>i.index*.05);function M(){w.value=!0,f.light()}function b(){w.value=!1}function S(){P.value=!0,f.medium()}function T(){P.value=!1}function q(){!i.product.is_available||l.value||(f.medium(),l.value=!0,A.post(R.url(),{product_id:i.product.id,quantity:1},{preserveScroll:!0,onSuccess:()=>{g.value=!0,f.success(),setTimeout(()=>{g.value=!1},2e3)},onFinish:()=>{l.value=!1}}))}const _=x(()=>i.product.image?`/storage/${i.product.image}`:null),z={type:"spring",...C.ios},v={type:"spring",...C.bouncy},B={type:"spring",...C.snappy};return(te,D)=>(s(),r(t(n),{tag:"article",initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{...z,delay:p.value},class:c(["product-card group cursor-pointer",[e.mode==="grid"?"flex flex-col":"flex flex-row gap-4"]])},{default:a(()=>[o(t(n),{animate:{scale:w.value?.97:1},transition:B,class:"contents",onMousedown:M,onMouseup:b,onMouseleave:b,onTouchstartPassive:M,onTouchend:b,onTouchcancel:b},{default:a(()=>[o(t(I),{href:V.value,class:c(["relative overflow-hidden",{"aspect-square rounded-t-2xl":e.mode==="grid","w-24 h-24 shrink-0 rounded-xl":e.mode==="list"}])},{default:a(()=>[_.value?(s(),k("img",{key:0,src:_.value,alt:e.product.name,class:"h-full w-full object-cover transition-transform duration-500 ease-[var(--ios-spring-smooth)] group-hover:scale-[1.05]",loading:"lazy"},null,8,Q)):(s(),k("div",W,[o(t(G),{class:"h-8 w-8 text-muted-foreground/50"})])),o(t(F),null,{default:a(()=>[e.product.stock_status?(s(),r(t(n),{key:0,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{...v,delay:p.value+.2},class:"absolute left-2 top-2 sm:left-3 sm:top-3"},{default:a(()=>[o(t(N),{variant:e.product.stock_status.status==="out_of_stock"||e.product.stock_status.status==="unavailable"?"destructive":e.product.stock_status.status==="low_stock"?"secondary":"default",class:c(["text-[10px] font-medium shadow-sm sm:text-xs",e.product.stock_status.status==="in_stock"&&"bg-green-100 text-green-700 hover:bg-green-100 dark:bg-green-900/30 dark:text-green-400",e.product.stock_status.status==="low_stock"&&"bg-amber-100 text-amber-700 hover:bg-amber-100 dark:bg-amber-900/30 dark:text-amber-400"])},{default:a(()=>[j(d(e.product.stock_status.label),1)]),_:1},8,["variant","class"])]),_:1},8,["transition"])):e.product.is_available?u("",!0):(s(),r(t(n),{key:1,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{...v,delay:p.value+.2},class:"absolute left-2 top-2 sm:left-3 sm:top-3"},{default:a(()=>[o(t(N),{variant:"destructive",class:"text-[10px] font-medium shadow-sm sm:text-xs"},{default:a(()=>[...D[0]||(D[0]=[j(" Habis ",-1)])]),_:1})]),_:1},8,["transition"]))]),_:1})]),_:1},8,["href","class"]),y("div",{class:c(["flex flex-1 flex-col",{"p-3 sm:p-4":e.mode==="grid","py-1":e.mode==="list"}])},[e.product.category?(s(),k("p",X,d(e.product.category.name),1)):u("",!0),y("h3",{class:c(["font-semibold text-foreground transition-colors duration-200",{"mb-1.5 line-clamp-2 text-sm sm:mb-2 sm:text-base":e.mode==="grid","mb-1 line-clamp-1 text-sm":e.mode==="list"}])},d(e.product.name),3),e.product.description&&e.mode==="grid"?(s(),k("p",Y,d(e.product.description),1)):u("",!0),y("div",Z,[y("p",ee,d($.value),1),e.mode==="grid"?(s(),r(t(n),{key:0,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{...v,delay:p.value+.3}},{default:a(()=>[o(t(n),{animate:{scale:P.value?.9:1},transition:B},{default:a(()=>[o(t(L),{size:"icon",variant:"secondary",disabled:!e.product.is_available||l.value,class:c(["h-11 w-11 shrink-0 rounded-full shadow-sm",[g.value?"bg-green-100 text-green-600 hover:bg-green-100 dark:bg-green-900/30 dark:text-green-400":"bg-gradient-to-br from-brand-blue-500 to-brand-blue-600 text-white hover:from-brand-blue-600 hover:to-brand-blue-700 shadow-brand-blue-500/25","disabled:opacity-50 disabled:from-gray-300 disabled:to-gray-400"]]),"aria-label":"Tambah ke keranjang",onClick:m(q,["prevent"]),onMousedown:m(S,["stop"]),onMouseup:m(T,["stop"]),onMouseleave:T,onTouchstartPassive:m(S,["stop"]),onTouchend:m(T,["stop"])},{default:a(()=>[l.value?(s(),r(t(J),{key:0,class:"h-5 w-5 animate-spin"})):u("",!0),o(t(F),{mode:"wait"},{default:a(()=>[g.value?(s(),r(t(n),{key:"success",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:v},{default:a(()=>[o(t(K),{class:"h-5 w-5"})]),_:1})):l.value?u("",!0):(s(),r(t(O),{key:1,class:"h-5 w-5"}))]),_:1})]),_:1},8,["disabled","class"])]),_:1},8,["animate"])]),_:1},8,["transition"])):u("",!0)])],2)]),_:1},8,["animate"])]),_:1},8,["transition","class"]))}});export{fe as _};
