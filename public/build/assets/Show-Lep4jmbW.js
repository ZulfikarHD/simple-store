import{d as oe,c as C,z as De,g as _,w as n,b as a,f as s,e,q as D,j as u,t as l,i as y,o as d,u as Ae,r as w,a as p,h as je,T as V,F as T,k as W,v as X,B as Te,x as Me,m as Y,n as G}from"./app-rYMLcSRK.js";import{a as le,b as de,c as ue,d as ce,e as me,f as pe,u as Be,h as ze,i as We,j as Le,k as Ne,l as Ke,_ as Ie,g as Fe}from"./AppLayout.vue_vue_type_script_setup_true_lang-CpM9iny-.js";import{_ as S}from"./index-Yhpfw_Rk.js";import{P as J,_ as q}from"./package-Bu1G0Iu3.js";import{_ as Z}from"./Label.vue_vue_type_script_setup_true_lang-DUin8xf5.js";import{c as fe,u as ge,M as f,s as g,a as I,S as Ve}from"./shopping-bag-B7J_X1G7.js";import{C as E}from"./circle-check-DL3FNF9H.js";import{_ as U}from"./PriceDisplay.vue_vue_type_script_setup_true_lang-CK0xnTPe.js";import{_ as qe}from"./PullToRefresh.vue_vue_type_script_setup_true_lang-B3il7ojJ.js";import{d as Ee,c as ee,f as He}from"./index-WEbfYsTi.js";import{T as te}from"./truck-Brihz3s4.js";import{C as se}from"./chef-hat-CsRKL14c.js";import{C as ae}from"./check-CEURsKOR.js";import{A as Re}from"./arrow-left-BjBL8sbw.js";import{U as ne}from"./user-DM7d-fQP.js";import{P as ie}from"./phone-B7_iUOIt.js";import{M as Oe}from"./map-pin-CprbVOQr.js";import{F as Qe}from"./file-text-CqfrOCef.js";import{C as re}from"./clock-xmYqOtSl.js";import{M as Xe}from"./message-square-DHqMXmYL.js";import{C as Ye}from"./chevron-right-DjX711rQ.js";import{L as Ge}from"./loader-circle-CTO26N7A.js";import{C as Je}from"./circle-x-BbfroPXU.js";import"./Input.vue_vue_type_script_setup_true_lang-DIu4COLh.js";import"./VisuallyHidden-CRL6js4n.js";import"./useForwardExpose-BDsdl_Vj.js";import"./RovingFocusGroup-B78VDds0.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-Dp0PW41R.js";import"./settings-CJA-V1on.js";import"./log-out-DzACcyKq.js";import"./x-D0ZSBgBB.js";import"./lock-CZQn6FQ3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ze=fe("CircleDotIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);const et=fe("NavigationIcon",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),tt={class:"flex flex-col gap-2 text-sm"},st={class:"flex items-center justify-between"},at={class:"font-mono font-semibold"},nt={class:"flex items-center justify-between"},it={class:"font-medium"},rt={class:"flex items-center justify-between"},ot=oe({__name:"StatusUpdateSuccessDialog",props:{open:{type:Boolean},newStatus:{},newStatusLabel:{},orderNumber:{},customerName:{},whatsappUrl:{default:""}},emits:["update:open","close","sendWhatsApp"],setup(i,{emit:v}){const M=i,c=v,A=ge(),$=C(()=>{switch(M.newStatus){case"confirmed":return{bg:"bg-blue-100 dark:bg-blue-900/40",text:"text-blue-600 dark:text-blue-400",ring:"ring-blue-500/20"};case"preparing":return{bg:"bg-purple-100 dark:bg-purple-900/40",text:"text-purple-600 dark:text-purple-400",ring:"ring-purple-500/20"};case"ready":return{bg:"bg-cyan-100 dark:bg-cyan-900/40",text:"text-cyan-600 dark:text-cyan-400",ring:"ring-cyan-500/20"};case"delivered":return{bg:"bg-green-100 dark:bg-green-900/40",text:"text-green-600 dark:text-green-400",ring:"ring-green-500/20"};case"cancelled":return{bg:"bg-red-100 dark:bg-red-900/40",text:"text-red-600 dark:text-red-400",ring:"ring-red-500/20"};default:return{bg:"bg-green-100 dark:bg-green-900/40",text:"text-green-600 dark:text-green-400",ring:"ring-green-500/20"}}}),L=C(()=>{switch(M.newStatus){case"confirmed":return"Pesanan telah dikonfirmasi dan siap diproses.";case"preparing":return"Pesanan sedang dalam proses pembuatan.";case"ready":return"Pesanan siap untuk dikirim ke customer.";case"delivered":return"Pesanan telah berhasil dikirim ke customer.";case"cancelled":return"Pesanan telah dibatalkan.";default:return"Status pesanan berhasil diperbarui."}});De(()=>M.open,k=>{k&&A.success()});function N(){A.light(),c("close"),c("update:open",!1)}function b(){A.medium(),c("sendWhatsApp")}return(k,m)=>(d(),_(s(pe),{open:i.open,"onUpdate:open":m[0]||(m[0]=P=>c("update:open",P))},{default:n(()=>[a(s(le),{class:"rounded-2xl sm:max-w-md"},{default:n(()=>[a(s(de),{class:"text-center"},{default:n(()=>[a(s(f),{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:s(g).bouncy,class:"mx-auto mb-4"},{default:n(()=>[e("div",{class:D(["flex h-16 w-16 items-center justify-center rounded-full ring-4",$.value.bg,$.value.ring])},[a(s(E),{class:D(["h-8 w-8",$.value.text])},null,8,["class"])],2)]),_:1},8,["transition"]),a(s(f),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...s(g).ios,delay:.1}},{default:n(()=>[a(s(ue),{class:"text-xl"},{default:n(()=>[...m[1]||(m[1]=[u(" Status Berhasil Diperbarui! ",-1)])]),_:1})]),_:1},8,["transition"]),a(s(f),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...s(g).ios,delay:.15}},{default:n(()=>[a(s(ce),{class:"text-center"},{default:n(()=>[u(l(L.value),1)]),_:1})]),_:1},8,["transition"])]),_:1}),a(s(f),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...s(g).ios,delay:.2},class:"rounded-xl border bg-muted/30 p-4"},{default:n(()=>[e("div",tt,[e("div",st,[m[2]||(m[2]=e("span",{class:"text-muted-foreground"},"Nomor Pesanan",-1)),e("span",at,l(i.orderNumber),1)]),e("div",nt,[m[3]||(m[3]=e("span",{class:"text-muted-foreground"},"Customer",-1)),e("span",it,l(i.customerName),1)]),e("div",rt,[m[4]||(m[4]=e("span",{class:"text-muted-foreground"},"Status Baru",-1)),e("span",{class:D(["rounded-full px-2.5 py-0.5 text-xs font-medium",$.value.bg,$.value.text])},l(i.newStatusLabel),3)])])]),_:1},8,["transition"]),a(s(me),{class:"flex-col gap-2 pt-2 sm:flex-col"},{default:n(()=>[a(s(f),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...s(g).ios,delay:.25},class:"w-full"},{default:n(()=>[i.whatsappUrl&&i.newStatus!=="cancelled"?(d(),_(s(S),{key:0,class:"ios-button w-full gap-2 bg-green-600 text-white hover:bg-green-700",onClick:b},{default:n(()=>[...m[5]||(m[5]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})],-1),u(" Kirim via WhatsApp ",-1)])]),_:1})):y("",!0)]),_:1},8,["transition"]),a(s(f),{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{...s(g).ios,delay:.3},class:"w-full"},{default:n(()=>[a(s(S),{variant:"outline",class:"ios-button w-full",onClick:N},{default:n(()=>[...m[6]||(m[6]=[u(" Tutup ",-1)])]),_:1})]),_:1},8,["transition"])]),_:1})]),_:1})]),_:1},8,["open"]))}}),lt={class:"admin-page flex flex-col gap-6 p-4 md:p-6"},dt={class:"flex items-center gap-3"},ut={class:"flex flex-col gap-1"},ct={class:"flex items-center gap-3"},mt={class:"text-xl font-bold tracking-tight md:text-2xl"},pt={key:0,class:"rounded-2xl border border-green-200 bg-green-50 p-4 text-green-800 dark:border-green-800 dark:bg-green-950 dark:text-green-200"},ft={key:0,class:"rounded-2xl border border-red-200 bg-red-50 p-4 text-red-800 dark:border-red-800 dark:bg-red-950 dark:text-red-200"},gt={class:"grid gap-6 lg:grid-cols-3"},xt={class:"flex flex-col gap-6 lg:col-span-2"},vt={class:"admin-form-section"},bt={class:"admin-form-section-header"},yt={class:"admin-form-section-content"},ht={class:"grid gap-4 sm:grid-cols-2"},_t={class:"flex items-start gap-3"},kt={class:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-primary/10"},wt={class:"min-w-0 flex-1"},Ct={class:"truncate font-semibold"},St={class:"flex items-start gap-3"},$t={class:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-green-100 dark:bg-green-900/40"},Pt={class:"min-w-0 flex-1"},Ut={class:"font-semibold"},Dt={class:"mt-2 flex gap-2"},At={key:0,class:"flex items-start gap-3 sm:col-span-2"},jt={class:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-orange-100 dark:bg-orange-900/40"},Tt={class:"min-w-0 flex-1"},Mt={class:"font-medium"},Bt={key:1,class:"flex items-start gap-3 sm:col-span-2"},zt={class:"flex h-12 w-12 shrink-0 items-center justify-center rounded-xl bg-muted"},Wt={class:"min-w-0 flex-1"},Lt={class:"font-medium"},Nt={class:"admin-form-section"},Kt={class:"admin-form-section-header"},It={class:"flex items-center justify-between"},Ft={class:"p-0"},Vt={class:"flex flex-col gap-3 p-4 md:hidden"},qt={class:"flex items-start justify-between gap-3"},Et={class:"min-w-0 flex-1"},Ht={class:"font-semibold leading-snug"},Rt={key:0,class:"mt-1 text-sm text-muted-foreground"},Ot={class:"mt-3 flex items-center justify-between border-t border-border/50 pt-3"},Qt={class:"text-sm text-muted-foreground"},Xt={class:"hidden overflow-x-auto md:block"},Yt={class:"admin-table"},Gt={class:"flex flex-col gap-0.5"},Jt={class:"font-medium"},Zt={key:0,class:"text-sm text-muted-foreground"},es={class:"text-right"},ts={class:"text-center"},ss={class:"text-right"},as={class:"border-t bg-muted/30 p-5"},ns={class:"flex flex-col gap-3"},is={class:"flex justify-between text-sm"},rs={class:"flex justify-between text-sm"},os={class:"flex justify-between border-t pt-3"},ls={class:"flex flex-col gap-6"},ds={class:"admin-form-section"},us={class:"admin-form-section-header"},cs={class:"admin-form-section-content"},ms={class:"flex flex-col gap-4"},ps={class:"admin-input-group"},fs=["value"],gs={key:0,class:"admin-input-group"},xs={class:"mt-2 border-t border-border pt-4"},vs={class:"admin-form-section"},bs={class:"admin-form-section-header"},ys={class:"admin-form-section-content"},hs={class:"status-timeline"},_s={class:"timeline-dot"},ks={class:"flex flex-col"},ws={class:"font-medium"},Cs={class:"text-sm text-muted-foreground"},Ss={class:"flex items-start gap-2"},$s={class:"text-sm text-red-700 dark:text-red-300"},Ps={key:0,class:"fixed inset-x-0 bottom-0 z-40 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 md:hidden",style:{"padding-bottom":"env(safe-area-inset-bottom)"}},Us={class:"flex items-center gap-3 p-4"},Ds={class:"min-w-0 flex-1"},As={class:"flex items-center gap-2"},js={class:"text-sm font-medium text-primary"},Ts={class:"mt-4 flex flex-col gap-2"},Ms=["onClick"],Bs={class:"font-medium"},zs={key:0,class:"mt-2 block text-red-600"},va=oe({__name:"Show",props:{order:{},statuses:{},whatsappUrls:{}},setup(i){const v=ge(),{openWhatsApp:M}=Be(),c=i,A=Ae(),$=[{title:"Dashboard",href:Ee().url},{title:"Pesanan",href:ee().url},{title:c.order.order_number,href:"#"}],L=C(()=>A.props.flash?.success),N=C(()=>A.props.flash?.error),b=w(c.order.status),k=w(""),m=w(!1),P=w(!1),K=w(!1),B=w(""),z=w(!1),F=w(!1),j=C(()=>{switch(c.order.status){case"pending":return{status:"confirmed",label:"Konfirmasi",icon:ae};case"confirmed":return{status:"preparing",label:"Proses",icon:se};case"preparing":return{status:"ready",label:"Siap Kirim",icon:J};case"ready":return{status:"delivered",label:"Selesai",icon:te};default:return null}});function xe(){j.value&&(v.medium(),b.value=j.value.status,m.value=!0)}const h=C(()=>b.value==="cancelled"),H=C(()=>b.value!==c.order.status);function R(o){switch(o){case"pending":return"admin-badge--pending";case"confirmed":return"admin-badge--confirmed";case"preparing":return"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300";case"ready":return"bg-cyan-100 text-cyan-700 dark:bg-cyan-900/40 dark:text-cyan-300";case"delivered":return"admin-badge--success";case"cancelled":return"admin-badge--destructive";default:return""}}function ve(o){switch(o){case"created":return re;case"confirmed":return E;case"preparing":return se;case"ready":return J;case"delivered":return te;case"cancelled":return Je;default:return Ze}}function be(o){return o?new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function ye(o){v.medium(),M(o)}function he(o){v.medium();const t=c.whatsappUrls[o];t&&window.open(t,"_blank")}function O(){H.value&&(h.value&&!k.value.trim()||(v.medium(),m.value=!0))}function _e(){m.value=!1,P.value=!0}function ke(){v.heavy(),z.value=!0,P.value=!1;const o=b.value;G.patch(He(c.order.id).url,{status:o,cancellation_reason:h.value?k.value:null},{onSuccess:()=>{v.success(),B.value=o,K.value=!0},onError:()=>{v.error()},onFinish:()=>{z.value=!1}})}function we(){const o=c.whatsappUrls[B.value];o&&window.open(o,"_blank")}function Ce(){K.value=!1}function Se(){P.value=!1}const Q=C(()=>{const o=[];return c.order.timestamps.created_at&&o.push({status:"created",label:"Pesanan Dibuat",timestamp:c.order.timestamps.created_at,active:!0}),c.order.timestamps.confirmed_at&&o.push({status:"confirmed",label:"Dikonfirmasi",timestamp:c.order.timestamps.confirmed_at,active:!0}),c.order.timestamps.preparing_at&&o.push({status:"preparing",label:"Sedang Diproses",timestamp:c.order.timestamps.preparing_at,active:!0}),c.order.timestamps.ready_at&&o.push({status:"ready",label:"Siap Dikirim",timestamp:c.order.timestamps.ready_at,active:!0}),c.order.timestamps.delivered_at&&o.push({status:"delivered",label:"Terkirim",timestamp:c.order.timestamps.delivered_at,active:!0}),c.order.timestamps.cancelled_at&&o.push({status:"cancelled",label:"Dibatalkan",timestamp:c.order.timestamps.cancelled_at,active:!0}),o});function $e(){v.light(),G.visit(ee().url)}function Pe(o){v.medium();const t=encodeURIComponent(o);window.open(`https://www.google.com/maps/search/?api=1&query=${t}`,"_blank")}function Ue(o){v.medium(),window.location.href=`tel:${o}`}return(o,t)=>(d(),p(T,null,[a(s(je),{title:`Detail Pesanan - ${i.order.order_number}`},null,8,["title"]),a(Ie,{breadcrumbs:$},{default:n(()=>[a(qe,null,{default:n(()=>[e("div",lt,[a(s(f),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:s(g).ios,class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},{default:n(()=>[e("div",dt,[a(s(S),{variant:"ghost",size:"icon",class:"ios-button h-10 w-10 shrink-0",onClick:$e},{default:n(()=>[a(s(Re),{class:"h-5 w-5"})]),_:1}),e("div",ut,[e("div",ct,[e("h1",mt,l(i.order.order_number),1),a(s(f),{initial:{scale:0},animate:{scale:1},transition:s(g).bouncy},{default:n(()=>[e("span",{class:D(["admin-badge text-sm",R(i.order.status)])},l(i.order.status_label),3)]),_:1},8,["transition"])]),t[11]||(t[11]=e("p",{class:"text-sm text-muted-foreground"}," Detail pesanan dan update status ",-1))])])]),_:1},8,["transition"]),a(V,{"enter-active-class":"transition-all duration-300 ease-[var(--ios-spring-smooth)]","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:n(()=>[L.value?(d(),p("div",pt,l(L.value),1)):y("",!0)]),_:1}),a(V,{"enter-active-class":"transition-all duration-300 ease-[var(--ios-spring-smooth)]","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:n(()=>[N.value?(d(),p("div",ft,l(N.value),1)):y("",!0)]),_:1}),e("div",gt,[e("div",xt,[a(s(f),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...s(g).ios,delay:s(I)(0)}},{default:n(()=>[e("div",vt,[e("div",bt,[e("h3",null,[a(s(ne)),t[12]||(t[12]=u(" Informasi Customer ",-1))])]),e("div",yt,[e("div",ht,[e("div",_t,[e("div",kt,[a(s(ne),{class:"h-5 w-5 text-primary"})]),e("div",wt,[t[13]||(t[13]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Nama",-1)),e("p",Ct,l(i.order.customer_name),1)])]),e("div",St,[e("div",$t,[a(s(ie),{class:"h-5 w-5 text-green-600 dark:text-green-400"})]),e("div",Pt,[t[16]||(t[16]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Telepon",-1)),e("p",Ut,l(i.order.customer_phone),1),e("div",Dt,[e("button",{class:"ios-button flex h-9 items-center gap-1.5 rounded-lg bg-green-600 px-3 text-sm font-medium text-white active:scale-95",onClick:t[0]||(t[0]=r=>ye(i.order.customer_phone))},[...t[14]||(t[14]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})],-1),e("span",{class:"hidden sm:inline"},"WhatsApp",-1)])]),e("button",{class:"ios-button flex h-9 items-center gap-1.5 rounded-lg border border-border bg-background px-3 text-sm font-medium active:scale-95",onClick:t[1]||(t[1]=r=>Ue(i.order.customer_phone))},[a(s(ie),{class:"h-4 w-4"}),t[15]||(t[15]=e("span",{class:"hidden sm:inline"},"Telepon",-1))])])])]),i.order.customer_address?(d(),p("div",At,[e("div",jt,[a(s(Oe),{class:"h-5 w-5 text-orange-600 dark:text-orange-400"})]),e("div",Tt,[t[18]||(t[18]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Alamat",-1)),e("p",Mt,l(i.order.customer_address),1),e("button",{class:"mt-2 flex h-9 items-center gap-1.5 rounded-lg border border-orange-200 bg-orange-50 px-3 text-sm font-medium text-orange-700 active:scale-95 dark:border-orange-800 dark:bg-orange-950 dark:text-orange-300",onClick:t[2]||(t[2]=r=>Pe(i.order.customer_address))},[a(s(et),{class:"h-4 w-4"}),t[17]||(t[17]=u(" Buka di Maps ",-1))])])])):y("",!0),i.order.notes?(d(),p("div",Bt,[e("div",zt,[a(s(Qe),{class:"h-5 w-5 text-muted-foreground"})]),e("div",Wt,[t[19]||(t[19]=e("p",{class:"text-xs font-medium uppercase tracking-wider text-muted-foreground"},"Catatan",-1)),e("p",Lt,l(i.order.notes),1)])])):y("",!0)])])])]),_:1},8,["transition"]),a(s(f),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...s(g).ios,delay:s(I)(1)}},{default:n(()=>[e("div",Nt,[e("div",Kt,[e("div",It,[e("h3",null,[a(s(Ve)),t[20]||(t[20]=u(" Detail Pesanan ",-1))]),a(s(q),{variant:"secondary",class:"tabular-nums"},{default:n(()=>[u(l(i.order.items_count)+" item ",1)]),_:1})])]),e("div",Ft,[e("div",Vt,[(d(!0),p(T,null,W(i.order.items,(r,x)=>(d(),_(s(f),{key:r.id,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{...s(g).ios,delay:.15+x*.03},class:"rounded-xl border bg-muted/20 p-4"},{default:n(()=>[e("div",qt,[e("div",Et,[e("h4",Ht,l(r.product_name),1),r.notes?(d(),p("p",Rt,l(r.notes),1)):y("",!0)]),a(s(q),{variant:"secondary",class:"shrink-0 tabular-nums"},{default:n(()=>[u(" x"+l(r.quantity),1)]),_:2},1024)]),e("div",Ot,[e("span",Qt,[a(U,{price:r.product_price,size:"sm"},null,8,["price"]),t[21]||(t[21]=u(" / item ",-1))]),a(U,{price:r.subtotal,size:"base",class:"font-bold text-primary"},null,8,["price"])])]),_:2},1032,["transition"]))),128))]),e("div",Xt,[e("table",Yt,[t[22]||(t[22]=e("thead",null,[e("tr",null,[e("th",null,"Produk"),e("th",{class:"text-right"},"Harga"),e("th",{class:"text-center"},"Qty"),e("th",{class:"text-right"},"Subtotal")])],-1)),e("tbody",null,[(d(!0),p(T,null,W(i.order.items,(r,x)=>(d(),_(s(f),{key:r.id,tag:"tr",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{...s(g).ios,delay:.15+x*.03}},{default:n(()=>[e("td",null,[e("div",Gt,[e("span",Jt,l(r.product_name),1),r.notes?(d(),p("span",Zt,l(r.notes),1)):y("",!0)])]),e("td",es,[a(U,{price:r.product_price,size:"sm"},null,8,["price"])]),e("td",ts,[a(s(q),{variant:"outline",class:"tabular-nums"},{default:n(()=>[u(l(r.quantity),1)]),_:2},1024)]),e("td",ss,[a(U,{price:r.subtotal,size:"sm",class:"font-semibold"},null,8,["price"])])]),_:2},1032,["transition"]))),128))])])]),e("div",as,[e("div",ns,[e("div",is,[t[23]||(t[23]=e("span",{class:"text-muted-foreground"},"Subtotal",-1)),a(U,{price:i.order.subtotal,size:"sm"},null,8,["price"])]),e("div",rs,[t[24]||(t[24]=e("span",{class:"text-muted-foreground"},"Ongkos Kirim",-1)),a(U,{price:i.order.delivery_fee,size:"sm"},null,8,["price"])]),e("div",os,[t[25]||(t[25]=e("span",{class:"text-lg font-bold"},"Total",-1)),a(U,{price:i.order.total,size:"lg",class:"text-xl! font-bold"},null,8,["price"])])])])])])]),_:1},8,["transition"])]),e("div",ls,[a(s(f),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...s(g).ios,delay:s(I)(2)}},{default:n(()=>[e("div",ds,[e("div",us,[e("h3",null,[a(s(E)),t[26]||(t[26]=u(" Update Status ",-1))])]),e("div",cs,[e("div",ms,[e("div",ps,[a(s(Z),{for:"status"},{default:n(()=>[...t[27]||(t[27]=[u("Status Pesanan",-1)])]),_:1}),X(e("select",{id:"status","onUpdate:modelValue":t[3]||(t[3]=r=>b.value=r),class:"admin-select"},[(d(!0),p(T,null,W(i.statuses,(r,x)=>(d(),p("option",{key:x,value:x},l(r),9,fs))),128))],512),[[Te,b.value]])]),a(V,{"enter-active-class":"transition-all duration-300 ease-[var(--ios-spring-smooth)]","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:n(()=>[h.value?(d(),p("div",gs,[a(s(Z),{for:"cancellation_reason"},{default:n(()=>[...t[28]||(t[28]=[u(" Alasan Pembatalan ",-1),e("span",{class:"text-destructive"},"*",-1)])]),_:1}),X(e("textarea",{id:"cancellation_reason","onUpdate:modelValue":t[4]||(t[4]=r=>k.value=r),placeholder:"Masukkan alasan pembatalan...",rows:"3",class:"admin-textarea"},null,512),[[Me,k.value]])])):y("",!0)]),_:1}),a(s(S),{disabled:!H.value||h.value&&!k.value.trim(),class:"admin-btn-primary",onClick:O},{default:n(()=>[...t[29]||(t[29]=[u(" Update Status ",-1)])]),_:1},8,["disabled"]),e("div",xs,[t[31]||(t[31]=e("p",{class:"mb-2 text-sm text-muted-foreground"}," Kirim notifikasi ke customer: ",-1)),a(s(S),{type:"button",variant:"outline",class:"ios-button w-full gap-2 border-green-500 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20",onClick:t[5]||(t[5]=r=>he(i.order.status))},{default:n(()=>[...t[30]||(t[30]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})],-1),u(" Kirim via WhatsApp ",-1)])]),_:1})])])])])]),_:1},8,["transition"]),a(s(f),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...s(g).ios,delay:s(I)(3)}},{default:n(()=>[e("div",vs,[e("div",bs,[e("h3",null,[a(s(re)),t[32]||(t[32]=u(" Timeline ",-1))])]),e("div",ys,[e("div",hs,[(d(!0),p(T,null,W(Q.value,(r,x)=>(d(),_(s(f),{key:r.status,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{...s(g).ios,delay:.25+x*.05},class:D(["timeline-item",{completed:r.status!=="cancelled",active:x===Q.value.length-1}])},{default:n(()=>[e("div",_s,[(d(),_(Y(ve(r.status)),{class:"h-4 w-4"}))]),e("div",ks,[e("span",ws,l(r.label),1),e("span",Cs,l(be(r.timestamp)),1)])]),_:2},1032,["transition","class"]))),128))]),i.order.status==="cancelled"&&i.order.cancellation_reason?(d(),_(s(f),{key:0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:s(g).ios,class:"mt-4 rounded-xl border border-red-200 bg-red-50 p-3 dark:border-red-800 dark:bg-red-950"},{default:n(()=>[e("div",Ss,[a(s(Xe),{class:"mt-0.5 h-4 w-4 shrink-0 text-red-600 dark:text-red-400"}),e("div",null,[t[33]||(t[33]=e("p",{class:"text-sm font-medium text-red-800 dark:text-red-200"}," Alasan Pembatalan ",-1)),e("p",$s,l(i.order.cancellation_reason),1)])])]),_:1},8,["transition"])):y("",!0)])])]),_:1},8,["transition"])])]),t[34]||(t[34]=e("div",{class:"h-40 md:hidden"},null,-1))])]),_:1}),j.value?(d(),p("div",Ps,[e("div",Us,[e("div",Ds,[t[35]||(t[35]=e("p",{class:"text-xs text-muted-foreground"},"Status Sekarang",-1)),e("div",As,[e("span",{class:D(["admin-badge",R(i.order.status)])},l(i.order.status_label),3),a(s(Ye),{class:"h-4 w-4 text-muted-foreground"}),e("span",js,l(i.statuses[j.value.status]),1)])]),a(s(S),{class:"h-12 shrink-0 gap-2 rounded-xl px-6",disabled:z.value,onClick:xe},{default:n(()=>[z.value?(d(),_(s(Ge),{key:0,class:"h-5 w-5 animate-spin"})):(d(),_(Y(j.value.icon),{key:1,class:"h-5 w-5"})),u(" "+l(j.value.label),1)]),_:1},8,["disabled"])])])):y("",!0),a(s(ze),{open:F.value,"onUpdate:open":t[6]||(t[6]=r=>F.value=r)},{default:n(()=>[a(s(We),{side:"bottom",class:"rounded-t-3xl"},{default:n(()=>[a(s(Le),null,{default:n(()=>[a(s(Ne),null,{default:n(()=>[...t[36]||(t[36]=[u("Update Status Pesanan",-1)])]),_:1}),a(s(Ke),null,{default:n(()=>[u(" Pilih status baru untuk pesanan "+l(i.order.order_number),1)]),_:1})]),_:1}),e("div",Ts,[(d(!0),p(T,null,W(i.statuses,(r,x)=>(d(),p("button",{key:x,class:D(["flex items-center justify-between rounded-xl px-4 py-4 text-left transition-colors",[b.value===x?"bg-primary/10 text-primary":"hover:bg-muted/50"]]),onClick:Ws=>{b.value=x,F.value=!1,O()}},[e("span",Bs,l(r),1),b.value===x?(d(),_(s(ae),{key:0,class:"h-5 w-5 text-primary"})):y("",!0)],10,Ms))),128))])]),_:1})]),_:1},8,["open"])]),_:1}),a(s(pe),{open:m.value,"onUpdate:open":t[8]||(t[8]=r=>m.value=r)},{default:n(()=>[a(s(le),{class:"rounded-2xl"},{default:n(()=>[a(s(de),null,{default:n(()=>[a(s(ue),null,{default:n(()=>[...t[37]||(t[37]=[u("Konfirmasi Update Status",-1)])]),_:1}),a(s(ce),null,{default:n(()=>[t[38]||(t[38]=u(" Apakah Anda yakin ingin mengubah status pesanan menjadi ",-1)),e("strong",null,l(i.statuses[b.value]),1),t[39]||(t[39]=u("? ",-1)),h.value?(d(),p("span",zs," Tindakan pembatalan tidak dapat dibatalkan. ")):y("",!0)]),_:1})]),_:1}),a(s(me),null,{default:n(()=>[a(s(S),{variant:"outline",class:"ios-button",onClick:t[7]||(t[7]=r=>m.value=!1)},{default:n(()=>[...t[40]||(t[40]=[u(" Batal ",-1)])]),_:1}),a(s(S),{variant:h.value?"destructive":"default",class:"ios-button",onClick:_e},{default:n(()=>[...t[41]||(t[41]=[u(" Ya, Lanjutkan ",-1)])]),_:1},8,["variant"])]),_:1})]),_:1})]),_:1},8,["open"]),a(Fe,{open:P.value,"onUpdate:open":t[9]||(t[9]=r=>P.value=r),title:h.value?"Konfirmasi Pembatalan":"Konfirmasi Update Status",description:`Masukkan password Anda untuk ${h.value?"membatalkan":"mengupdate status"} pesanan ini.`,"confirm-label":h.value?"Batalkan Pesanan":"Update Status","confirm-variant":h.value?"destructive":"default",loading:z.value,onConfirm:ke,onCancel:Se},null,8,["open","title","description","confirm-label","confirm-variant","loading"]),a(ot,{open:K.value,"onUpdate:open":t[10]||(t[10]=r=>K.value=r),"new-status":B.value,"new-status-label":i.statuses[B.value]||"","order-number":i.order.order_number,"customer-name":i.order.customer_name,"whatsapp-url":i.whatsappUrls[B.value],onClose:Ce,onSendWhatsApp:we},null,8,["open","new-status","new-status-label","order-number","customer-name","whatsapp-url"])],64))}});export{va as default};
