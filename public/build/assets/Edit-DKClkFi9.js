import{d as j,r as g,c as V,a as A,b as i,f as a,h as T,w as o,e,t as y,s as z,j as r,q as C,v as H,x as L,g as E,i as J,o as U,F as R,n as K}from"./app-CZppbeYQ.js";import{F as q,_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-CNgCg_lr.js";import{_ as x}from"./index-Cc65Ncch.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-D5qj-S-y.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-BiUR-eYh.js";import{_ as W}from"./Checkbox.vue_vue_type_script_setup_true_lang-CLrD4jF3.js";import{_ as h}from"./InputError.vue_vue_type_script_setup_true_lang-SbAcGJYD.js";import{_ as X}from"./PullToRefresh.vue_vue_type_script_setup_true_lang-Dzx9S4ml.js";import{d as Q,i as F,u as Y}from"./index-jc7A-Wt-.js";import{u as Z,M as c,s as u,a as k}from"./shopping-bag-CgJLrDmv.js";import{A as ee}from"./arrow-left-BPXUAo6M.js";import{H as te}from"./hash-BlyFbbLS.js";import{I as ae}from"./image-plus-BrNPCaG6.js";import{X as ie}from"./x-C5bMfCMh.js";import{I as se}from"./image-CiTIcKon.js";import{U as oe}from"./upload-DP12OBke.js";import{C as ne}from"./circle-check-big-DmpIkb5U.js";import{S as M}from"./save-BL2_twCV.js";import"./VisuallyHidden-dee-T_ua.js";import"./useForwardExpose-BON2X7ZT.js";import"./RovingFocusGroup-DlfWv2G2.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-Dp0PW41R.js";import"./package-D47XvBWL.js";import"./settings-DyBCjIIM.js";import"./log-out-Bbr3RYW6.js";import"./chevron-right-BwmxWRAz.js";import"./index-ChOoFR3L.js";import"./PriceDisplay.vue_vue_type_script_setup_true_lang-s8qMSPGe.js";import"./lock-wwAmgkYU.js";import"./loader-circle-Dh4DslJv.js";import"./circle-check-Dq0cs3o_.js";import"./clock-DtWUUNZy.js";import"./phone-CutlmKqZ.js";import"./check-KYstt4-N.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VisuallyHiddenInput-CmbrwRCq.js";const re={class:"admin-page flex flex-col gap-6 p-4 md:p-6"},le={class:"flex items-center gap-3"},de={class:"flex flex-col gap-1"},me={class:"text-muted-foreground"},ce={class:"flex flex-col gap-6 lg:col-span-2"},ue={class:"admin-form-section"},pe={class:"admin-form-section-header"},fe={class:"admin-form-section-content"},ge={class:"flex flex-col gap-5"},ve={class:"admin-input-group"},_e={class:"admin-input-group"},ye={class:"admin-input-group"},xe={class:"admin-form-section"},be={class:"admin-form-section-header"},he={class:"admin-form-section-content"},ke={class:"flex flex-col gap-4"},we={class:"admin-image-preview"},Ce=["src"],Ue={class:"flex items-center gap-2 text-sm font-medium text-muted-foreground"},Ie={class:"admin-image-preview"},Pe=["src","alt"],Se={class:"admin-upload-area"},Ve={class:"upload-icon"},Ee={class:"mb-2 text-sm font-medium"},Ke={class:"flex flex-col gap-6"},Be={class:"admin-form-section"},Fe={class:"admin-form-section-header"},Me={class:"admin-form-section-content"},$e={class:"flex items-start gap-3 rounded-xl border border-border/50 bg-muted/20 p-4"},De={class:"flex flex-col"},Ne={class:"admin-form-section"},Ge={class:"admin-form-section-content flex flex-col gap-3"},je={class:"fixed inset-x-0 bottom-0 z-40 border-t bg-background/95 backdrop-blur supports-backdrop-filter:bg-background/80 p-4 md:hidden"},wt=j({__name:"Edit",props:{category:{}},setup(v){const p=Z(),m=v,$=[{title:"Dashboard",href:Q().url},{title:"Kategori",href:F().url},{title:"Edit Kategori",href:"#"}],s=g({name:m.category.name,description:m.category.description||"",image:null,is_active:m.category.is_active,sort_order:m.category.sort_order.toString()}),d=g({}),f=g(!1),_=g(null),I=V(()=>!!m.category.image),w=g(!0),P=V(()=>m.category.image?`/storage/${m.category.image}`:null);function D(l){p.selection();const n=l.target.files?.[0];n&&(s.value.image=n,_.value=URL.createObjectURL(n),w.value=!1)}function N(){p.light(),s.value.image=null,_.value=null,w.value=I.value}function G(){p.medium(),f.value=!0,d.value={};const l=new FormData;l.append("_method","PUT"),l.append("name",s.value.name),l.append("description",s.value.description||""),l.append("is_active",s.value.is_active?"1":"0"),s.value.sort_order&&l.append("sort_order",s.value.sort_order),s.value.image&&l.append("image",s.value.image),K.post(Y(m.category.id).url,l,{forceFormData:!0,onSuccess:()=>{p.success()},onError:t=>{p.error(),d.value=t},onFinish:()=>{f.value=!1}})}function S(){p.light(),K.get(F().url)}return(l,t)=>(U(),A(R,null,[i(a(T),{title:`Edit ${v.category.name}`},null,8,["title"]),i(O,{breadcrumbs:$},{default:o(()=>[i(X,null,{default:o(()=>[e("div",re,[i(a(c),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:a(u).ios,class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},{default:o(()=>[e("div",le,[i(a(x),{variant:"ghost",size:"icon",class:"ios-button h-10 w-10 shrink-0",onClick:S},{default:o(()=>[i(a(ee),{class:"h-5 w-5"})]),_:1}),e("div",de,[t[4]||(t[4]=e("h1",{class:"text-2xl font-bold tracking-tight md:text-3xl"}," Edit Kategori ",-1)),e("p",me,' Ubah informasi "'+y(v.category.name)+'" ',1)])])]),_:1},8,["transition"]),e("form",{id:"category-form",onSubmit:z(G,["prevent"]),class:"grid gap-6 lg:grid-cols-3"},[e("div",ce,[i(a(c),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...a(u).ios,delay:a(k)(0)}},{default:o(()=>[e("div",ue,[e("div",pe,[e("h3",null,[i(a(q)),t[5]||(t[5]=r(" Informasi Kategori ",-1))])]),e("div",fe,[e("div",ge,[e("div",ve,[i(a(b),{for:"name"},{default:o(()=>[...t[6]||(t[6]=[r("Nama Kategori *",-1)])]),_:1}),i(a(B),{id:"name",modelValue:s.value.name,"onUpdate:modelValue":t[0]||(t[0]=n=>s.value.name=n),type:"text",placeholder:"Masukkan nama kategori",class:C(["admin-input",{"border-destructive":d.value.name}])},null,8,["modelValue","class"]),i(h,{message:d.value.name},null,8,["message"])]),e("div",_e,[i(a(b),{for:"description"},{default:o(()=>[...t[7]||(t[7]=[r("Deskripsi",-1)])]),_:1}),H(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=n=>s.value.description=n),rows:"4",placeholder:"Masukkan deskripsi kategori",class:C(["admin-textarea",{"border-destructive":d.value.description}])},null,2),[[L,s.value.description]]),i(h,{message:d.value.description},null,8,["message"])]),e("div",ye,[i(a(b),{for:"sort_order",class:"flex items-center gap-2"},{default:o(()=>[i(a(te),{class:"h-4 w-4 text-primary"}),t[8]||(t[8]=r(" Urutan ",-1))]),_:1}),i(a(B),{id:"sort_order",modelValue:s.value.sort_order,"onUpdate:modelValue":t[2]||(t[2]=n=>s.value.sort_order=n),type:"number",min:"0",placeholder:"0",class:C(["admin-input",{"border-destructive":d.value.sort_order}])},null,8,["modelValue","class"]),t[9]||(t[9]=e("p",{class:"hint"},"Angka lebih kecil akan ditampilkan lebih dulu",-1)),i(h,{message:d.value.sort_order},null,8,["message"])])])])])]),_:1},8,["transition"]),i(a(c),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...a(u).ios,delay:a(k)(1)}},{default:o(()=>[e("div",xe,[e("div",be,[e("h3",null,[i(a(ae)),t[10]||(t[10]=r(" Gambar Kategori ",-1))])]),e("div",he,[e("div",ke,[_.value?(U(),E(a(c),{key:0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:a(u).bouncy,class:"flex flex-col gap-2"},{default:o(()=>[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-green-600 dark:text-green-400"}," Gambar Baru (akan menggantikan gambar lama) ",-1)),e("div",we,[e("img",{src:_.value,alt:"Preview"},null,8,Ce),e("button",{type:"button",class:"remove-btn ios-button",onClick:N},[i(a(ie))])])]),_:1},8,["transition"])):w.value&&P.value?(U(),E(a(c),{key:1,initial:{opacity:0},animate:{opacity:1},transition:a(u).ios,class:"flex flex-col gap-2"},{default:o(()=>[e("div",Ue,[i(a(se),{class:"h-4 w-4"}),t[12]||(t[12]=r(" Gambar Saat Ini ",-1))]),e("div",Ie,[e("img",{src:P.value,alt:v.category.name},null,8,Pe)])]),_:1},8,["transition"])):J("",!0),e("div",Se,[e("div",Ve,[i(a(oe))]),e("p",Ee,y(I.value?"Klik untuk mengganti gambar":"Klik atau drag file untuk upload"),1),t[13]||(t[13]=e("p",{class:"text-xs text-muted-foreground"}," PNG, JPG, JPEG atau WEBP (maks. 2MB) ",-1)),e("input",{type:"file",accept:"image/jpeg,image/png,image/jpg,image/webp",class:"absolute inset-0 cursor-pointer opacity-0",onChange:D},null,32)]),i(h,{message:d.value.image},null,8,["message"])])])])]),_:1},8,["transition"])]),e("div",Ke,[i(a(c),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...a(u).ios,delay:a(k)(2)}},{default:o(()=>[e("div",Be,[e("div",Fe,[e("h3",null,[i(a(ne)),t[14]||(t[14]=r(" Status ",-1))])]),e("div",Me,[e("div",$e,[i(a(W),{id:"is_active",checked:s.value.is_active,"onUpdate:checked":t[3]||(t[3]=n=>s.value.is_active=n)},null,8,["checked"]),e("div",De,[i(a(b),{for:"is_active",class:"cursor-pointer font-medium"},{default:o(()=>[...t[15]||(t[15]=[r(" Kategori Aktif ",-1)])]),_:1}),t[16]||(t[16]=e("p",{class:"text-xs text-muted-foreground"}," Kategori akan ditampilkan di toko ",-1))])])])])]),_:1},8,["transition"]),i(a(c),{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{...a(u).ios,delay:a(k)(3)}},{default:o(()=>[e("div",Ne,[e("div",Ge,[i(a(x),{type:"submit",class:"admin-btn-primary gap-2",disabled:f.value},{default:o(()=>[i(a(M),{class:"h-4 w-4"}),r(" "+y(f.value?"Menyimpan...":"Simpan Perubahan"),1)]),_:1},8,["disabled"]),i(a(x),{type:"button",variant:"outline",class:"admin-btn-secondary",onClick:S},{default:o(()=>[...t[17]||(t[17]=[r(" Batal ",-1)])]),_:1})])])]),_:1},8,["transition"])])],32),t[18]||(t[18]=e("div",{class:"h-36 md:hidden"},null,-1))])]),_:1}),e("div",je,[i(a(x),{type:"submit",form:"category-form",class:"admin-btn-primary gap-2 w-full",disabled:f.value},{default:o(()=>[i(a(M),{class:"h-4 w-4"}),r(" "+y(f.value?"Menyimpan...":"Simpan Perubahan"),1)]),_:1},8,["disabled"])])]),_:1})],64))}});export{wt as default};
